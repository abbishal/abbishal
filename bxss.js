document.getElementById('content').innerHTML = atob("PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8dGl0bGU+SEFDS0VEIEJZIEpVU1RJQ0UgLSBCYW5nbGFkZXNoIFVuZGVyIE1haW50ZW5hbmNlPC90aXRsZT4KICAgIDxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wIj4KICAgIDxsaW5rIHJlbD0ic2hvcnRjdXQgaWNvbiIgaHJlZj0iaHR0cHM6Ly9paWxpLmlvL2RCa2lXRE4ud2VicCIgdHlwZT0iaW1hZ2UveC1pY29uIj4KPC9oZWFkPgo8Ym9keT4gICAgCjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+CmJvZHkgewogICAgYmFja2dyb3VuZC1jb2xvcjogIzE0MTUxYiAhaW1wb3J0YW50OwogICAgbWFyZ2luOiAwICFpbXBvcnRhbnQ7CiAgICBmb250LWZhbWlseTogSnVyYSwgc2Fucy1zZXJpZiAhaW1wb3J0YW50Owp9CgpAZm9udC1mYWNlIHsKICAgIGZvbnQtZmFtaWx5OiBKdXJhOwogICAgc3JjOiB1cmwoIi4uL2ZvbnRzL0p1cmEudHRmIik7Cn0KCmEgewogICAgdGV4dC1kZWNvcmF0aW9uOiBub25lICFpbXBvcnRhbnQ7CiAgICBjb2xvcjogaW5oZXJpdCAhaW1wb3J0YW50Owp9CgojZjRrMy1sb2dvIHsKICAgIHBhZGRpbmctdG9wOiAxMS40NzU0MDk4MzYwNjU1NzN2aCAhaW1wb3J0YW50ICFpbXBvcnRhbnQ7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXIgIWltcG9ydGFudDsKfQoKI2hlYWRlci10ZXh0IHsKICAgIGZvbnQtd2VpZ2h0OiBib2xkICFpbXBvcnRhbnQ7CiAgICBmb250LXNpemU6IDIycHggIWltcG9ydGFudDsKICAgIGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50OwogICAgdGV4dC1zaGFkb3c6IDJweCAycHggM3B4IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKSAhaW1wb3J0YW50OwogICAgLyogbWFyZ2luOiA0LjkxODAzMjc4Njg4NTI0NnZoIGF1dG8gYXV0byBhdXRvICFpbXBvcnRhbnQ7ICovCiAgICB0ZXh0LWFsaWduOiBjZW50ZXIgIWltcG9ydGFudDsKfQoKI2hlYWRlciB7CiAgICBiYWNrZ3JvdW5kOiBub25lICFpbXBvcnRhbnQ7Cn0KCiNkZWZhY2VyLWluZm8tY29udGFpbmVyIHsKICAgIHRleHQtYWxpZ246IGNlbnRlciAhaW1wb3J0YW50OwogICAgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7CiAgICBtYXJnaW46IDEzLjExNDc1NDA5ODM2MDY1NnZoIGF1dG8gYXV0byAhaW1wb3J0YW50Owp9CgojZGVmYWNlci1pbmZvIHsKICAgIHRleHQtc2hhZG93OiAwIDAgMC41ZW0gIzI3YjM1MCwgMCAwIDAuNWVtICMyN2IzNTAgIWltcG9ydGFudDsKICAgIHdpZHRoOiA0MCUgIWltcG9ydGFudDsKICAgIG1hcmdpbjogYXV0byAhaW1wb3J0YW50OwogICAgdGV4dC1hbGlnbjogY2VudGVyICFpbXBvcnRhbnQ7CiAgICBmb250LXNpemU6IDE0cHggIWltcG9ydGFudDsKfQoKLmRlZmFjZXItbmFtZS1jb250YWluZXIgewogICAgZm9udC1zaXplOiAyMnB4ICFpbXBvcnRhbnQ7Cn0KCiNkZWZhY2VyLW5hbWUgewogICAgZm9udC1zaXplOiAyMHB4ICFpbXBvcnRhbnQ7CiAgICB3aWR0aDogMzAlICFpbXBvcnRhbnQ7CiAgICBwb3NpdGlvbjogcmVsYXRpdmUgIWltcG9ydGFudDsKICAgIHRvcDogNHB4ICFpbXBvcnRhbnQ7Cn0KCiNwaHJhc2UtY29udGFpbmVyIHsKICAgIHBhZGRpbmc6IDIwcHggIWltcG9ydGFudDsKICAgIGZvbnQtc2l6ZTogMjBweCAhaW1wb3J0YW50OwogICAgdGV4dC1hbGlnbjogY2VudGVyICFpbXBvcnRhbnQ7CiAgICBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsKICAgIHRleHQtc2hhZG93OiAwIDAgMC41ZW0gIzI3YjM1MCwgMCAwIDAuNWVtICMyN2IzNTAgIWltcG9ydGFudDsKICAgIC8qIG1hcmdpbi10b3A6IDQuOTE4MDMyNzg2ODg1MjQ2dmggIWltcG9ydGFudDsgKi8KfQoKI2Zvb3RlciB7CiAgICBiYWNrZ3JvdW5kOiBub25lICFpbXBvcnRhbnQ7CiAgICBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsKICAgIHRleHQtYWxpZ246IGNlbnRlciAhaW1wb3J0YW50OwogICAgbWFyZ2luOiAxMS40NzU0MDk4MzYwNjU1NzN2aCBhdXRvIGF1dG8gIWltcG9ydGFudDsKICAgIHBhZGRpbmc6IDJ2dyAhaW1wb3J0YW50OwogICAgZm9udC1zaXplOiAyMHB4ICFpbXBvcnRhbnQ7Cn0KCi5hZG1pbiB7CiAgICB0ZXh0LXNoYWRvdzogcmVkIDFweCAxcHggMTBweCAhaW1wb3J0YW50OwogICAgY29sb3I6IHJlZCAhaW1wb3J0YW50Owp9Cgouc2VuaW9yLW1hbmFnZXIgewogICAgdGV4dC1zaGFkb3c6ICNmZjAwNmEgMXB4IDFweCAxMHB4ICFpbXBvcnRhbnQ7CiAgICBjb2xvcjogI2ZmMDA2YSAhaW1wb3J0YW50Owp9CgoubWFuYWdlciB7CiAgICB0ZXh0LXNoYWRvdzogI0ZGNjExOCAxcHggMXB4IDEwcHggIWltcG9ydGFudDsKICAgIGNvbG9yOiAjRkY2MTE4ICFpbXBvcnRhbnQ7Cn0KCgouZGVmYWNlciB7CiAgICB0ZXh0LXNoYWRvdzogI2U1YjcwMSAxcHggMXB4IDEwcHg7CiAgICBjb2xvcjogI2U1YjcwMTsKfQoKLnZpcCB7CiAgICB0ZXh0LXNoYWRvdzogIzE2RTNDNSAxcHggMXB4IDEwcHggIWltcG9ydGFudDsKICAgIGNvbG9yOiAjMTZFM0M1ICFpbXBvcnRhbnQ7Cn0KCi5vdmVybGF5IHsKICAgIHBvaW50ZXItZXZlbnRzOiBub25lOwogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgd2lkdGg6IDEwMCU7CiAgICBoZWlnaHQ6IDEwMCU7CiAgICBiYWNrZ3JvdW5kOiByZXBlYXRpbmctbGluZWFyLWdyYWRpZW50KAogICAgICAgICAgICAxODBkZWcsCiAgICAgICAgICAgIHJnYmEoMCwgMCwgMCwgMCkgMCwKICAgICAgICAgICAgcmdiYSgwLCAwLCAwLCAwLjMpIDUwJSwKICAgICAgICAgICAgcmdiYSgwLCAwLCAwLCAwKSAxMDAlKTsKICAgIGJhY2tncm91bmQtc2l6ZTogYXV0byA0cHg7CiAgICB6LWluZGV4OiAxOwp9Cgoub3ZlcmxheTo6YmVmb3JlIHsKICAgIGNvbnRlbnQ6ICIiOwogICAgcG9pbnRlci1ldmVudHM6IG5vbmU7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICBkaXNwbGF5OiBibG9jazsKICAgIHRvcDogMDsKICAgIGxlZnQ6IDA7CiAgICByaWdodDogMDsKICAgIGJvdHRvbTogMDsKICAgIHdpZHRoOiAxMDAlOwogICAgaGVpZ2h0OiAxMDAlOwogICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KAogICAgICAgICAgICAwZGVnLAogICAgICAgICAgICB0cmFuc3BhcmVudCAwJSwKICAgICAgICAgICAgcmdiYSgzMiwgMTI4LCAzMiwgMC4yKSAyJSwKICAgICAgICAgICAgcmdiYSgzMiwgMTI4LCAzMiwgMC44KSAzJSwKICAgICAgICAgICAgcmdiYSgzMiwgMTI4LCAzMiwgMC4yKSAzJSwKICAgICAgICAgICAgdHJhbnNwYXJlbnQgMTAwJSk7CiAgICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0OwogICAgYW5pbWF0aW9uOiBzY2FuIDcuNXMgbGluZWFyIDBzIGluZmluaXRlOwp9CgpAa2V5ZnJhbWVzIHNjYW4gewogICAgMCUgewogICAgICAgIGJhY2tncm91bmQtcG9zaXRpb246IDAgLTEwMHZoOwogICAgfQogICAgMzUlLCAxMDAlIHsKICAgICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwIDEwMHZoOwogICAgfQp9CgpAa2V5ZnJhbWVzIHNwaW4gewogICAgZnJvbSB7CiAgICAgICAgdHJhbnNmb3JtOiByb3RhdGVZKDBkZWcpOwogICAgfQogICAgdG8gewogICAgICAgIHRyYW5zZm9ybTogcm90YXRlWSgzNjBkZWcpOwogICAgfQp9CgpALXdlYmtpdC1rZXlmcmFtZXMgc3BpbiB7CiAgICBmcm9tIHsKICAgICAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlWSgwZGVnKTsKICAgIH0KICAgIHRvIHsKICAgICAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlWSgzNjBkZWcpOwogICAgfQp9Cjwvc3R5bGU+CjxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij4KInVzZSBzdHJpY3QiOwoKdmFyIFJlZCA9IHsgYXBwOiB7IG06IHt9LCBzOiB7fSwgbW9kdWxlOiBmdW5jdGlvbiAobSwgY3MpIHsgdGhpcy5tW21dID0geydjcyc6IHt9LCAnbXMnOiB7fSwgJ3JzJzoge319OyBpZiAoY3MpIHsgT2JqZWN0LmtleXMoY3MpLmZvckVhY2goZnVuY3Rpb24gKGspIHsgdmFyIGMgPSBrOyB2YXIgY29ucyA9IGNzW2tdOyBSZWQuYXBwLm1bbV1bJ2NzJ11bY10gPSB7ZjogY29ucywgdjogW10sIGk6IFtdLH07IFJlZC5hcHAuYU0obSwgYyk7IHZhciBpID0gbmV3IFJlZC5hcHAubVttXVsnY3MnXVtjXVsnZiddOyBSZWQuYXBwLm1bbV1bJ2NzJ11bY11bJ2knXSA9IGk7IHZhciBhZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tyZWQtYXBwPScgKyBtICsgJ10nKTsgaWYgKGFlLmdldEF0dHJpYnV0ZSgncmVkLWNvbnRyb2xsZXInKSA9PSBudWxsKSB7IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFlLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tyZWQtY29udHJvbGxlcj0nICsgYyArICddJykpLm1hcChmdW5jdGlvbiAoY2UpIHsgaWYgKCFjZSkgcmV0dXJuIGZhbHNlOyBpZiAoY2UuZ2V0QXR0cmlidXRlKCdyZWQtY29udHJvbGxlcicpID09PSBjKSB7IGlmIChjZS5nZXRBdHRyaWJ1dGUoJ3JlZC1pbml0JykpIHsgUmVkLmFwcC5tW21dWydjcyddW2NdWyd2J10gPSBjZS5nZXRBdHRyaWJ1dGUoJ3JlZC1pbml0Jyk7IH0gUmVkLmFwcC5zdChtLCBjLCBjZSk7IFJlZC5hcHAuY0IobSwgYywgaSk7IH0gfSk7IH0gZWxzZSB7IGlmIChhZS5nZXRBdHRyaWJ1dGUoJ3JlZC1jb250cm9sbGVyJykgPT09IGMpIHsgaWYgKGFlLmdldEF0dHJpYnV0ZSgncmVkLWluaXQnKSkgeyBSZWQuYXBwLm1bbV1bJ2NzJ11bY11bJ3ZhcmlhYmxlcyddID0gYWUuZ2V0QXR0cmlidXRlKCdyZWQtaW5pdCcpOyB9IHRoaXMuc3QobSwgYywgYWUpOyB0aGlzLmNCKG0sIGMsIGkpOyB9IH0gfSk7IH0gfSwgYWRkQ29udHJvbGxlcjogZnVuY3Rpb24gKG0sIGMsIGNvbnMpIHsgdGhpcy5tW21dWydjcyddW2NdID0ge2Y6IGNvbnMsIHY6IFtdLCBpOiBbXSx9OyB0aGlzLmFNKG0sIGMpOyB2YXIgYWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbcmVkLWFwcD0nICsgbSArICddJyk7IHZhciBpID0gbmV3IHRoaXMubVttXVsnY3MnXVtjXVsnZiddOyBpZiAoYWUuZ2V0QXR0cmlidXRlKCdyZWQtY29udHJvbGxlcicpID09IG51bGwpIHsgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYWUucXVlcnlTZWxlY3RvckFsbCgnW3JlZC1jb250cm9sbGVyPScgKyBjICsgJ10nKSkubWFwKGZ1bmN0aW9uIChjZSkgeyBpZiAoIWNlKSByZXR1cm4gZmFsc2U7IGlmIChjZS5nZXRBdHRyaWJ1dGUoJ3JlZC1pbml0JykpIHsgUmVkLmFwcC5tW21dWydjcyddW2NdWyd2J10gPSBjZS5nZXRBdHRyaWJ1dGUoJ3JlZC1pbml0Jyk7IH0gUmVkLmFwcC5zdChtLCBjLCBjZSk7IFJlZC5hcHAuY0IobSwgYywgaSk7IH0pOyB9IGVsc2UgeyBpZiAoYWUuZ2V0QXR0cmlidXRlKCdyZWQtY29udHJvbGxlcicpID09PSBjKSB7IGlmIChhZS5nZXRBdHRyaWJ1dGUoJ3JlZC1pbml0JykpIHsgdGhpcy5tW21dWydjcyddW2NdWyd2J10gPSBhZS5nZXRBdHRyaWJ1dGUoJ3JlZC1pbml0Jyk7IH0gdGhpcy5zdChtLCBjLCBhZSk7IHRoaXMuY0IobSwgYywgaSk7IH0gfSB9LCBhTTogZnVuY3Rpb24gKG1lLCBtbCkgeyB0aGlzLm1bbWVdWydtcyddW21sXSA9IHtkOiBbXSwgZnM6IFtdLH07IHZhciBhZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tyZWQtYXBwPScgKyBtZSArICddJyk7IGlmIChhZS5nZXRBdHRyaWJ1dGUoJ3JlZC1jb250cm9sbGVyJykgPT0gbnVsbCkgeyBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhZS5xdWVyeVNlbGVjdG9yQWxsKCdbcmVkLWNvbnRyb2xsZXI9JyArIG1sICsgJ10nKSkubWFwKGZ1bmN0aW9uIChjZSkgeyBpZiAoIWNlKSByZXR1cm4gZmFsc2U7IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGNlLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tyZWQtbW9kZWxdJykpLm1hcChmdW5jdGlvbiAobWRlKSB7IFJlZC5hcHAubUIobWUsIG1sLCBtZGUpOyB2YXIgbWQgPSBtZGUuZ2V0QXR0cmlidXRlKCdyZWQtbW9kZWwnKTsgaWYgKCFtZGUudmFsdWUpIHsgUmVkLmFwcC5tW21lXVsnbXMnXVttbF1bJ2QnXVsnbW9kZWxfJyArIG1kXSA9IG1kZS5pbm5lckhUTUw7IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGNlLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tyZWQtYmluZD0ibW9kZWxfJyArIG1kICsgJyJdJykpLm1hcChmdW5jdGlvbiAoZmUpIHsgUmVkLmFwcC5tW21lXVsnbXMnXVttbF1bJ2ZzJ10ucHVzaChmZSk7IH0pOyB9IGVsc2UgeyBSZWQuYXBwLm1bbWVdWydtcyddW21sXVsnZCddWydtb2RlbF8nICsgbWRdID0gbWRlLnZhbHVlOyBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChjZS5xdWVyeVNlbGVjdG9yQWxsKCdbcmVkLWJpbmQ9Im1vZGVsXycgKyBtZCArICciXScpKS5tYXAoZnVuY3Rpb24gKGZlKSB7IFJlZC5hcHAubVttZV1bJ21zJ11bbWxdWydmcyddLnB1c2goZmUpOyB9KTsgfSB9KTsgfSk7IH0gZWxzZSB7IGlmIChhZS5nZXRBdHRyaWJ1dGUoJ3JlZC1jb250cm9sbGVyJykgPT09IG1sKSB7IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFlLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tyZWQtbW9kZWxdJykpLm1hcChmdW5jdGlvbiAobWRlKSB7IHZhciBtZCA9IG1kZS5nZXRBdHRyaWJ1dGUoJ3JlZC1tb2RlbCcpOyBSZWQuYXBwLm1CKG1lLCBtbCwgbWRlKTsgaWYgKCFtZGUudmFsdWUpIHsgUmVkLmFwcC5tW21lXVsnbXMnXVttbF1bJ2QnXVsnbW9kZWxfJyArIG1kXSA9IG1lLmlubmVySFRNTDsgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYWUucXVlcnlTZWxlY3RvckFsbCgnW3JlZC1iaW5kPSJtb2RlbF8nICsgbWQgKyAnIl0nKSkubWFwKGZ1bmN0aW9uIChmZSkgeyBSZWQuYXBwLm1bbWVdWydtcyddW21sXVsnZnMnXS5wdXNoKGZlKTsgfSk7IH0gZWxzZSB7IFJlZC5hcHAubVttZV1bJ21zJ11bbWxdWydkJ11bJ21vZGVsXycgKyBtZF0gPSBtZGUudmFsdWU7IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFlLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tyZWQtYmluZD0ibW9kZWxfJyArIG1kICsgJyJdJykpLm1hcChmdW5jdGlvbiAoZmUpIHsgUmVkLmFwcC5tW21lXVsnbXMnXVttbF1bJ2ZzJ10ucHVzaChmZSk7IH0pOyB9IH0pOyB9IH0gfSwgcmVnaXN0ZXJSb3V0ZTogZnVuY3Rpb24gKG0sIHIpIHsgT2JqZWN0LmtleXMoKHIpKS5mb3JFYWNoKGZ1bmN0aW9uIChybikgeyBSZWQuYXBwLm1bbV1bJ3JzJ11bcm5dID0gcltybl07IHZhciBhZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tyZWQtYXBwPScgKyBtICsgJ10nKTsgaWYgKCFhZSkgcmV0dXJuIGZhbHNlOyBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhZS5xdWVyeVNlbGVjdG9yQWxsKCdbaHJlZj0iIyEnICsgcm4gKyAnIl0nKSkubWFwKGZ1bmN0aW9uIChyZSkgeyByZS5zZXRBdHRyaWJ1dGUoImhyZWYiLCByW3JuXSk7IH0pOyB9KSB9LCBzdDogZnVuY3Rpb24gKG0sIGMsIGNlKSB7IGlmICghdGhpcy5zW21dKSB0aGlzLnNbbV0gPSB7fTsgdGhpcy5zW21dW2NdID0ge307IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGNlLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tyZWQtYmluZF0nKSkubWFwKGZ1bmN0aW9uIChiZSkgeyB2YXIgYmYgPSBiZS5nZXRBdHRyaWJ1dGUoJ3JlZC1iaW5kJyk7IGlmICghYmYpIHJldHVybiBmYWxzZTsgaWYgKCFSZWQuYXBwLnNbbV1bY11bYmZdKSB7IFJlZC5hcHAuc1ttXVtjXVtiZl0gPSB7YjogYmYsIGU6IFtdLH07IH0gUmVkLmFwcC5zW21dW2NdW2JmXS5lLnB1c2goYmUpOyB9KTsgfSwgY0I6IGZ1bmN0aW9uIChtLCBjLCBpKSB7IE9iamVjdC5rZXlzKHRoaXMuc1ttXVtjXSkuZm9yRWFjaChmdW5jdGlvbiAoYmYpIHsgUmVkLmFwcC5zW21dW2NdW2JmXS5lLmZvckVhY2goZnVuY3Rpb24gKGJlKSB7IHZhciBjdjsgY3YgPSBSZWQuYXBwLm1bbV1bJ2NzJ11bY11bJ3YnXTsgdmFyIG92ID0gJyc7IE9iamVjdC5rZXlzKGkpLmZvckVhY2goZnVuY3Rpb24gKGspIHsgb3YgKz0gInZhciAiICsgayArICIgPSAnIiArIGlba10gKyAiJzsiOyB9KTsgdmFyIGJmID0gYmUuZ2V0QXR0cmlidXRlKCdyZWQtYmluZCcpOyB2YXIgbWwgPSBjOyBPYmplY3Qua2V5cyhSZWQuYXBwLm1bbV1bJ21zJ11bbWxdWydkJ10pLmZvckVhY2goZnVuY3Rpb24gKGspIHsgb3YgKz0gInZhciAiICsgayArICIgPSAnIiArIFJlZC5hcHAubVttXVsnbXMnXVttbF1bJ2QnXVtrXSArICInOyI7IH0pOyB2YXIgciA9IGV2YWwoY3YgKyBvdiArIGJmKTsgaWYgKGJlLnZhbHVlID09IG51bGwpIHsgYmUuaW5uZXJIVE1MID0gcjsgfSBlbHNlIHsgYmUudmFsdWUgPSByOyB9IH0pOyB9KTsgfSwgbUI6IGZ1bmN0aW9uIChtZSwgbWwsIG1kZSkgeyBtZGUuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbiAoKSB7IHZhciBtZCA9IG1kZS5nZXRBdHRyaWJ1dGUoJ3JlZC1tb2RlbCcpOyBSZWQuYXBwLm1bbWVdWydtcyddW21sXVsnZCddWydtb2RlbF8nICsgbWRdID0gbWRlLnZhbHVlOyBSZWQuYXBwLm1bbWVdWydtcyddW21sXVsnZnMnXS5mb3JFYWNoKGZ1bmN0aW9uIChmZSkgeyBpZiAoZmUuZ2V0QXR0cmlidXRlKCdyZWQtYmluZCcpID09PSAnbW9kZWxfJyArIG1kKSB7IGlmIChmZS52YWx1ZSA9PSBudWxsKSB7IGZlLmlubmVySFRNTCA9IG1kZS52YWx1ZTsgfSBlbHNlIHsgZmUudmFsdWUgPSBtZGUudmFsdWU7IH0gfSB9KTsgfSwgZmFsc2UpOyB9LCB9LCB2c3JzOiBbXSwgZnNyczogW10sIHNzcnM6IFtdLCByZWFkeTogZnVuY3Rpb24gKGNiKSB7IGlmIChkb2N1bWVudC5yZWFkeVN0YXRlICE9PSAnbG9hZGluZycpIHsgY2IoKTsgfSBlbHNlIGlmIChkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKSBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgY2IpOyBlbHNlIHsgZG9jdW1lbnQuYXR0YWNoRXZlbnQoJ29ucmVhZHlzdGF0ZWNoYW5nZScsIGZ1bmN0aW9uICgpIHsgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScpIHsgY2IoKTsgfSB9KTsgfSB9LCBnZXQ6IGZ1bmN0aW9uIChzKSB7IHZhciBlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwocyk7IGlmIChlcy5sZW5ndGggPiAxKSB7IHJldHVybiBlczsgfSBlbHNlIHsgcmV0dXJuIGVzWzBdOyB9IH0sIHNlbGVjdDogZnVuY3Rpb24gKHMpIHsgdmFyIGVzID0gW107IGlmICh0eXBlb2YgcyA9PSAnc3RyaW5nJykgeyBlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwocyk7IHZhciBlYWEgPSBbXTsgdmFyIGVsID0gZXMubGVuZ3RoOyBmb3IgKHZhciBjID0gMDsgYyA8PSBlbCArIDE7IGMrKykgeyBpZiAoZXNbY10pIHsgZWFhLnB1c2goZXNbY10pOyB9IH0gZXMgPSBlYWE7IH0gZWxzZSB7IHZhciBpZSA9IHR5cGVvZiBIVE1MRWxlbWVudCA9PT0gIm9iamVjdCIgPyBzIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgOiBzICYmIHR5cGVvZiBzID09PSAib2JqZWN0IiAmJiBzICE9PSBudWxsICYmIHMubm9kZVR5cGUgPT09IDEgJiYgdHlwZW9mIHMubm9kZU5hbWUgPT09ICJzdHJpbmciOyBpZiAoaWUgIT09IHRydWUpIHsgZXMgPSBuZXcgQXJyYXkocyk7IGVzID0gZXNbMF07IH0gZWxzZSB7IGVzID0gbmV3IEFycmF5KHMpOyBlc1swXSA9IHM7IH0gfSByZXR1cm4geyBlbGVtZW50czogZnVuY3Rpb24gKCkgeyByZXR1cm4gZXM7IH0sIGlubmVySFRNTDogZnVuY3Rpb24gKHYpIHsgaWYgKHYgPT0gbnVsbCkgeyBpZiAoZXMubGVuZ3RoID4gMSkgeyB2YXIgY3QgPSBbXTsgZXMuZm9yRWFjaChmdW5jdGlvbiAoZSkgeyBjdC5wdXNoKGUuaW5uZXJIVE1MKTsgfSk7IHJldHVybiBjdDsgfSBlbHNlIHsgcmV0dXJuIGVzWzBdLmlubmVySFRNTDsgfSB9IGVsc2UgeyBlcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7IGUuaW5uZXJIVE1MID0gdjsgfSk7IH0gfSwgb3V0ZXJIVE1MOiBmdW5jdGlvbiAodikgeyBpZiAodiA9PSBudWxsKSB7IGlmIChlcy5sZW5ndGggPiAxKSB7IHZhciBjdCA9IFtdOyBlcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7IGN0LnB1c2goZS5vdXRlckhUTUwpOyB9KTsgcmV0dXJuIGN0OyB9IGVsc2UgeyByZXR1cm4gZXNbMF0ub3V0ZXJIVE1MOyB9IH0gZWxzZSB7IGVzLmZvckVhY2goZnVuY3Rpb24gKGUpIHsgZS5vdXRlckhUTUwgPSB2OyB9KTsgfSB9LCB2YWx1ZTogZnVuY3Rpb24gKHYpIHsgaWYgKGVzLmxlbmd0aCA+IDEpIHsgaWYgKHYgIT0gbnVsbCl7IGVzLmZvckVhY2goZnVuY3Rpb24gKGUpIHsgZS52YWx1ZSA9IHY7IH0pOyB9IGVsc2UgeyB2YXIgdnMgPSBbXTsgZXMuZm9yRWFjaChmdW5jdGlvbiAoZSkgeyB2cy5wdXNoKGUudmFsdWUpOyB9KTsgcmV0dXJuIHZzOyB9IH0gZWxzZSB7IGlmICh2ICE9IG51bGwpeyBlc1swXS52YWx1ZSA9IHY7IH0gZWxzZSB7IHJldHVybiBlc1swXS52YWx1ZTsgfSB9IH0sIGFmdGVyOiBmdW5jdGlvbiAodikgeyBlcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7IGUuaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmVuZCcsIHYpOyB9KTsgfSwgYmVmb3JlOiBmdW5jdGlvbiAodikgeyBlcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7IGUuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCB2KTsgfSk7IH0sIENTUzogZnVuY3Rpb24gKHAsIHYpIHsgdmFyIHBzID0gW107IGlmICh2ICE9IG51bGwpIHsgZXMuZm9yRWFjaChmdW5jdGlvbiAoZSkgeyBlLnN0eWxlW3BdID0gdjsgfSk7IH0gZWxzZSB7IGlmICh0eXBlb2YgcCAhPSAnc3RyaW5nJykgeyBlcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7IHBzID0gT2JqZWN0LmtleXMocCk7IHBzLmZvckVhY2goZnVuY3Rpb24gKHBybykgeyBlLnN0eWxlW3Byb10gPSBwW3Byb107IH0pOyB9KTsgfSBlbHNlIHsgZXMuZm9yRWFjaChmdW5jdGlvbiAoZSkgeyBwcy5wdXNoKGdldENvbXB1dGVkU3R5bGUoZSlbcF0pOyB9KTsgaWYgKGVzLmxlbmd0aCA+IDEpIHsgcmV0dXJuIHBzOyB9IGVsc2UgeyByZXR1cm4gcHNbMF07IH0gfSB9IH0sIGFwcGVuZDogZnVuY3Rpb24gKGMpIHsgZXMuZm9yRWFjaChmdW5jdGlvbiAoZSkgeyBlLmFwcGVuZENoaWxkKGMpOyB9KTsgfSwgY2xvbmU6IGZ1bmN0aW9uICgpIHsgaWYgKGVzLmxlbmd0aCA+IDEpIHsgdmFyIG5zID0gW107IGVzLmZvckVhY2goZnVuY3Rpb24gKGUpIHsgbnMucHVzaChlLmNsb25lTm9kZSh0cnVlKSk7IH0pOyByZXR1cm4gbnM7IH0gZWxzZSB7IHJldHVybiBlc1swXS5jbG9uZU5vZGUodHJ1ZSk7IH0gfSwgcGFyZW50OiBmdW5jdGlvbiAoKSB7IGlmIChlcy5sZW5ndGggPiAxKSB7IHZhciBwczsgZXMuZm9yRWFjaChmdW5jdGlvbiAoZSkgeyBwcy5wdXNoKGUucGFyZW50Tm9kZSk7IH0pOyByZXR1cm4gcHM7IH0gZWxzZSB7IHJldHVybiBlc1swXS5wYXJlbnROb2RlOyB9IH0sIHByZXY6IGZ1bmN0aW9uICgpIHsgaWYgKGVzLmxlbmd0aCA+IDEpIHsgdmFyIHBzOyBlcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7IHBzLnB1c2goZS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nKTsgfSk7IHJldHVybiBwczsgfSBlbHNlIHsgcmV0dXJuIGVzWzBdLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7IH0gfSwgbmV4dDogZnVuY3Rpb24gKCkgeyBpZiAoZXMubGVuZ3RoID4gMSkgeyB2YXIgbnM7IGVzLmZvckVhY2goZnVuY3Rpb24gKGUpIHsgbnMucHVzaChlLm5leHRFbGVtZW50U2libGluZyk7IH0pOyByZXR1cm4gbnM7IH0gZWxzZSB7IHJldHVybiBlc1swXS5uZXh0RWxlbWVudFNpYmxpbmc7IH0gfSwgY2hpbGRyZW46IGZ1bmN0aW9uICgpIHsgaWYgKGVzLmxlbmd0aCA+IDEpIHsgdmFyIGMgPSBbXTsgZXMuZm9yRWFjaChmdW5jdGlvbiAoZSkgeyBjLnB1c2goZS5vdXRlckhUTUwpOyB9KTsgcmV0dXJuIGM7IH0gZWxzZSB7IHJldHVybiBlc1swXS5jaGlsZHJlbjsgfSB9LCBjb250YWluczogZnVuY3Rpb24gKGMpIHsgaWYgKGVzLmxlbmd0aCA+IDEpIHsgdmFyIHI7IGVzLmZvckVhY2goZnVuY3Rpb24gKGUpIHsgci5wdXNoKGUuY29udGFpbnMoYykpOyB9KTsgcmV0dXJuIHI7IH0gZWxzZSB7IHJldHVybiBlc1swXS5jb250YWlucyhjKSB9IH0sIG9uOiBmdW5jdGlvbiAoZXYsIGVoKSB7IGVzLmZvckVhY2goZnVuY3Rpb24gKGUpIHsgZS5hZGRFdmVudExpc3RlbmVyKGV2LCBlaCk7IH0pOyB9LCBvZmY6IGZ1bmN0aW9uIChldiwgZWgpIHsgZXMuZm9yRWFjaChmdW5jdGlvbiAoZSkgeyBlLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXYsIGVoKTsgfSk7IH0sIGxvYWQ6IGZ1bmN0aW9uIChlaCkgeyBlcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7IGUuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGVoKTsgfSk7IH0sIHJlc2l6ZTogZnVuY3Rpb24gKGVoKSB7IGVzLmZvckVhY2goZnVuY3Rpb24gKGUpIHsgZS5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBlaCk7IH0pOyB9LCBjbGljazogZnVuY3Rpb24gKGVoKSB7IGVzLmZvckVhY2goZnVuY3Rpb24gKGUpIHsgZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGVoKTsgfSk7IH0sIHN1Ym1pdDogZnVuY3Rpb24gKGVoKSB7IGVzLmZvckVhY2goZnVuY3Rpb24gKGUpIHsgZS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBlaCk7IH0pOyB9LCBjaGFuZ2U6IGZ1bmN0aW9uIChlaCkgeyBlcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7IGUuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZWgpOyB9KTsgfSwga2V5ZG93bjogZnVuY3Rpb24gKGVoKSB7IGVzLmZvckVhY2goZnVuY3Rpb24gKGUpIHsgZS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZWgpOyB9KTsgfSwga2V5dXA6IGZ1bmN0aW9uIChlaCkgeyBlcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7IGUuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBlaCk7IH0pOyB9LCBtb3VzZUVudGVyOiBmdW5jdGlvbiAoZWgpIHsgZXMuZm9yRWFjaChmdW5jdGlvbiAoZSkgeyBlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCBlaCk7IH0pOyB9LCBtb3VzZUxlYXZlOiBmdW5jdGlvbiAoZWgpIHsgZXMuZm9yRWFjaChmdW5jdGlvbiAoZSkgeyBlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBlaCk7IH0pOyB9LCBob3ZlcjogZnVuY3Rpb24gKGVoKSB7IGVzLmZvckVhY2goZnVuY3Rpb24gKGUpIHsgZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCBlaCk7IH0pOyB9LCB0ZXh0OiBmdW5jdGlvbiAodCkgeyBlcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7IGUudGV4dENvbnRlbnQgPSB0OyB9KTsgfSwgYWRkQ2xhc3M6IGZ1bmN0aW9uIChjc24pIHsgZXMuZm9yRWFjaChmdW5jdGlvbiAoZSkgeyB2YXIgY3MgPSBjc24uc3BsaXQoJyAnKTsgY3MuZm9yRWFjaChmdW5jdGlvbiAoc2MpIHsgaWYgKGUuY2xhc3NMaXN0KSB7IGUuY2xhc3NMaXN0LmFkZChzYyk7IH0gZWxzZSB7IGUuY2xhc3NOYW1lICs9ICcgJyArIHNjOyB9IH0pOyB9KTsgfSwgaGFzQ2xhc3M6IGZ1bmN0aW9uIChjbikgeyBpZiAoZXMubGVuZ3RoID4gMSkgeyB2YXIgcjsgZXMuZm9yRWFjaChmdW5jdGlvbiAoZSkgeyBpZiAoZS5jbGFzc0xpc3QpIHsgci5wdXNoKGUuY2xhc3NMaXN0LmNvbnRhaW5zKGNuKSk7IH0gZWxzZSB7IHIucHVzaChuZXcgUmVnRXhwKCcoXnwgKScgKyBjbiArICcoIHwkKScsICdnaScpLnRlc3QoZS5jbGFzc05hbWUpKTsgfSB9KTsgcmV0dXJuIHI7IH0gZWxzZSB7IGlmIChlc1swXS5jbGFzc0xpc3QpIHsgcmV0dXJuIGVzWzBdLmNsYXNzTGlzdC5jb250YWlucyhjbik7IH0gZWxzZSB7IHJldHVybiBuZXcgUmVnRXhwKCcoXnwgKScgKyBjbiArICcoIHwkKScsICdnaScpLnRlc3QoZXNbMF0uY2xhc3NOYW1lKTsgfSB9IH0sIHJlbW92ZUNsYXNzOiBmdW5jdGlvbiAoY3NuKSB7IGVzLmZvckVhY2goZnVuY3Rpb24gKGUpIHsgdmFyIGNzID0gY3NuLnNwbGl0KCcgJyk7IGNzLmZvckVhY2goZnVuY3Rpb24gKHNjKSB7IGUuY2xhc3NMaXN0LnJlbW92ZShzYyk7IH0pOyB9KTsgfSwgaWQ6IGZ1bmN0aW9uIChpKSB7IGVzLmZvckVhY2goZnVuY3Rpb24gKGUpIHsgZS5zZXRBdHRyaWJ1dGUoJ2lkJywgaSk7IH0pOyB9LCBhdHRyOiBmdW5jdGlvbiAoYSwgdikgeyBpZiAodiA9PSBudWxsKSB7IGlmIChlcy5sZW5ndGggPiAxKSB7IHZhciBhcyA9IFtdOyBlcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7IGFzLnB1c2goZS5nZXRBdHRyaWJ1dGUoYSkpOyB9KTsgcmV0dXJuIGFzOyB9IGVsc2UgeyByZXR1cm4gZXNbMF0uZ2V0QXR0cmlidXRlKGEpOyB9IH0gZWxzZSB7ZXMuZm9yRWFjaChmdW5jdGlvbiAoZSkgeyBlLnNldEF0dHJpYnV0ZShhLCB2KTsgfSk7IH0gfSwgcmVtb3ZlQXR0cjogZnVuY3Rpb24gKGEpIHsgZXMuZm9yRWFjaChmdW5jdGlvbiAoZSkgeyBlLnJlbW92ZUF0dHJpYnV0ZShhKTsgfSk7IH0sIGFjdGlvbjogZnVuY3Rpb24gKHApIHsgZXMuZm9yRWFjaChmdW5jdGlvbiAoZSkgeyBlLmFjdGlvbiA9IHA7IH0pOyB9LCBzb3VyY2U6IGZ1bmN0aW9uIChzKSB7IGVzLmZvckVhY2goZnVuY3Rpb24gKGUpIHsgZS5zcmMgPSBzOyB9KTsgfSwgYWx0OiBmdW5jdGlvbiAoYSkgeyBlcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7IGUuc2V0QXR0cmlidXRlKCdhbHQnLCBhKTsgfSk7IH0sIGVhY2g6IGZ1bmN0aW9uIChmKSB7IGVzLmZvckVhY2goZik7IH0sIGVtcHR5OiBmdW5jdGlvbiAoKSB7IGVzLmZvckVhY2goZnVuY3Rpb24gKGUpIHsgZS5pbm5lckhUTUwgPSAnJzsgfSk7IH0sIHJlbW92ZTogZnVuY3Rpb24gKGMpIHsgZXMuZm9yRWFjaChmdW5jdGlvbiAoZSkgeyBlLnJlbW92ZUNoaWxkKGMpOyB9KTsgfSwgd2lkdGg6IGZ1bmN0aW9uIChtKSB7IGlmIChlcy5sZW5ndGggPiAxKSB7IHZhciB3cjsgZXMuZm9yRWFjaChmdW5jdGlvbiAoZSkgeyBpZiAobSA9PT0gZmFsc2UpIHsgd3IucHVzaChlLm9mZnNldFdpZHRoKTsgfSBlbHNlIHsgdmFyIHcgPSBlLm9mZnNldFdpZHRoOyB2YXIgcyA9IGdldENvbXB1dGVkU3R5bGUoZSk7IHcgKz0gcGFyc2VJbnQocy5tYXJnaW5MZWZ0KSArIHBhcnNlSW50KHMubWFyZ2luUmlnaHQpOyB3ci5wdXNoKHcpOyB9IH0pOyByZXR1cm4gd3I7IH0gZWxzZSB7IGlmIChtID09PSBmYWxzZSkgeyByZXR1cm4gZXNbMF0ub2Zmc2V0V2lkdGg7IH0gZWxzZSB7IHZhciB3ID0gZXNbMF0ub2Zmc2V0V2lkdGg7IHZhciBzID0gZ2V0Q29tcHV0ZWRTdHlsZShlc1swXSk7IHcgKz0gcGFyc2VJbnQocy5tYXJnaW5MZWZ0KSArIHBhcnNlSW50KHMubWFyZ2luUmlnaHQpOyByZXR1cm4gdzsgfSB9IH0sIGhlaWdodDogZnVuY3Rpb24gKG0pIHsgaWYgKGVzLmxlbmd0aCA+IDEpIHsgdmFyIGhyOyBlcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7IGlmIChtID09PSBmYWxzZSkgeyBoci5wdXNoKGUub2Zmc2V0SGVpZ2h0KTsgfSBlbHNlIHsgdmFyIGggPSBlLm9mZnNldEhlaWdodDsgdmFyIHMgPSBnZXRDb21wdXRlZFN0eWxlKGUpOyBoICs9IHBhcnNlSW50KHMubWFyZ2luTGVmdCkgKyBwYXJzZUludChzLm1hcmdpblJpZ2h0KTsgaHIucHVzaChoKTsgfSB9KTsgcmV0dXJuIGhyOyB9IGVsc2UgeyBpZiAobSA9PT0gZmFsc2UpIHsgcmV0dXJuIGVzWzBdLm9mZnNldEhlaWdodDsgfSBlbHNlIHsgdmFyIGggPSBlc1swXS5vZmZzZXRIZWlnaHQ7IHZhciBzID0gZ2V0Q29tcHV0ZWRTdHlsZShlc1swXSk7IGggKz0gcGFyc2VJbnQocy5tYXJnaW5MZWZ0KSArIHBhcnNlSW50KHMubWFyZ2luUmlnaHQpOyByZXR1cm4gaDsgfSB9IH0sIHBvc2l0aW9uOiBmdW5jdGlvbiAoKSB7IGlmIChlcy5sZW5ndGggPiAxKSB7IHZhciBvOyBlcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7IG8ucHVzaCh7bGVmdDogZS5vZmZzZXRMZWZ0LCB0b3A6IGUub2Zmc2V0VG9wfSk7IH0pOyByZXR1cm4gbzsgfSBlbHNlIHsgcmV0dXJuIHtsZWZ0OiBlc1swXS5vZmZzZXRMZWZ0LCB0b3A6IGVzWzBdLm9mZnNldFRvcH07IH0gfSwgb2Zmc2V0OiBmdW5jdGlvbiAoKSB7IGlmIChlcy5sZW5ndGggPiAxKSB7IHZhciBvOyBlcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7IHZhciByID0gZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsgby5wdXNoKHt0b3A6IHIudG9wICsgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AsIGxlZnQ6IHIubGVmdCArIGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdH0pOyB9KTsgcmV0dXJuIG87IH0gZWxzZSB7IHZhciByID0gZXNbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7IHJldHVybiB7dG9wOiByLnRvcCArIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wLCBsZWZ0OiByLmxlZnQgKyBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnR9OyB9IH0sIG9mZnNldFBhcmVudDogZnVuY3Rpb24gKCkgeyBpZiAoZXMubGVuZ3RoID4gMSkgeyB2YXIgbzsgZXMuZm9yRWFjaChmdW5jdGlvbiAoZSkgeyBvLnB1c2goZS5vZmZzZXRQYXJlbnQoKSk7IH0pOyByZXR1cm4gbzsgfSBlbHNlIHsgcmV0dXJuIGVzWzBdLm9mZnNldFBhcmVudCgpOyB9IH0sIHNob3c6IGZ1bmN0aW9uICgpIHsgZXMuZm9yRWFjaChmdW5jdGlvbiAoZSkgeyBlLnN0eWxlLmRpc3BsYXkgPSAnJzsgfSk7IH0sIGhpZGU6IGZ1bmN0aW9uICgpIHsgZXMuZm9yRWFjaChmdW5jdGlvbiAoZSkgeyBlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IH0pOyB9LCBmYWRlSW46IGZ1bmN0aW9uIChkKSB7IGVzLmZvckVhY2goZnVuY3Rpb24gKGUpIHsgUmVkLmZhZGVJbihlLCBkKTsgfSk7IH0sIGZhZGVPdXQ6IGZ1bmN0aW9uIChkKSB7IGVzLmZvckVhY2goZnVuY3Rpb24gKGUpIHsgUmVkLmZhZGVPdXQoZSwgZCk7IH0pOyB9LCAgcGxheTogZnVuY3Rpb24gKCkgeyBlcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7IGUucGxheSgpOyB9KTsgfSwgfTsgfSwgb25saW5lOiBmdW5jdGlvbiAoKSB7IHJldHVybiBuYXZpZ2F0b3Iub25MaW5lOyB9LCByZWRpcmVjdDogZnVuY3Rpb24odSkgeyB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHU7IH0sIHVzZXI6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnQ7IH0sIElFOiBmdW5jdGlvbigpeyB2YXIgdWEgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudDsgdmFyIG1zaWUgPSB1YS5pbmRleE9mKCdNU0lFICcpOyBpZiAobXNpZSA+IDApIHsgcmV0dXJuIHBhcnNlSW50KHVhLnN1YnN0cmluZyhtc2llICsgNSwgdWEuaW5kZXhPZignLicsIG1zaWUpKSwgMTApOyB9IHZhciB0cmlkZW50ID0gdWEuaW5kZXhPZignVHJpZGVudC8nKTsgaWYgKHRyaWRlbnQgPiAwKSB7IHZhciBydiA9IHVhLmluZGV4T2YoJ3J2OicpOyByZXR1cm4gcGFyc2VJbnQodWEuc3Vic3RyaW5nKHJ2ICsgMywgdWEuaW5kZXhPZignLicsIHJ2KSksIDEwKTsgfSB2YXIgZWRnZSA9IHVhLmluZGV4T2YoJ0VkZ2UvJyk7IGlmIChlZGdlID4gMCkgeyByZXR1cm4gcGFyc2VJbnQodWEuc3Vic3RyaW5nKGVkZ2UgKyA1LCB1YS5pbmRleE9mKCcuJywgZWRnZSkpLCAxMCk7IH0gcmV0dXJuIGZhbHNlOyB9LCBnb0JhY2s6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHdpbmRvdy5oaXN0b3J5LmJhY2soKTsgfSwgYWpheDogZnVuY3Rpb24gKGMpIHsgdmFyIHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsgci5vbmxvYWQgPSBjLnN1Y2Nlc3M7IHZhciBtID0gYy50eXBlOyB2YXIgdSA9IGMudXJsOyBpZiAoYy5kYXRhICE9IG51bGwpIHsgdmFyIGRrID0gT2JqZWN0LmtleXMoYy5kYXRhKTsgdmFyIGR2ID0gT2JqZWN0LnZhbHVlcyhjLmRhdGEpOyB2YXIgZCA9ICcnOyB2YXIgZGtsID0gZGsubGVuZ3RoIC0gMTsgZm9yICh2YXIgaSA9IDA7IGkgPD0gZGtsOyBpKyspIHsgZCArPSBka1tpXSArICc9JyArIGR2W2ldOyBpZiAoaSAhPT0gZGtsKSB7IGQgKz0gJyYnOyB9IH0gfSBlbHNlIHsgdmFyIGQgPSBudWxsOyB9IHIub3BlbihtLCB1LCB0cnVlKTsgaWYgKGMuY29udGVudFR5cGUgIT0gbnVsbCkgeyByLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsIGMuY29udGVudFR5cGUgKyAnOycpOyB9IGlmIChjLmRhdGFUeXBlICE9IG51bGwpIHsgci5yZXNwb25zZVR5cGUgPSBjLmRhdGFUeXBlOyB9IHIuc2V0UmVxdWVzdEhlYWRlcignY2hhcnNldCcsICdVVEYtOCcpOyByLnNldFJlcXVlc3RIZWFkZXIoJ0FKQVgtUmVxdWVzdCcsICdSZWRKU19BSkFYX1JlcXVlc3QnKTsgaWYgKGQgIT0gbnVsbCkgeyByLnNlbmQoZW5jb2RlVVJJKGQpKTsgfSBlbHNlIHsgci5zZW5kKCk7IH0gfSwgcGFyc2VKU09OOiBmdW5jdGlvbiAocykgeyByZXR1cm4gSlNPTi5wYXJzZShzKTsgfSwgcGFyc2VIVE1MOiBmdW5jdGlvbiAocykgeyB2YXIgdCA9IGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgpOyB0LmJvZHkuaW5uZXJIVE1MID0gczsgcmV0dXJuIHQuYm9keS5jaGlsZHJlbjsgfSwgc2V0Q29va2llOiBmdW5jdGlvbiAobiwgdiwgZHMpIHsgdmFyIGUgPSAiIjsgaWYgKGRzKSB7IHZhciBkID0gbmV3IERhdGUoKTsgZC5zZXRUaW1lKGQuZ2V0VGltZSgpICsgKGRzICogMjQgKiA2MCAqIDYwICogMTAwMCkpOyBlID0gIjsgZXhwaXJlcz0iICsgZC50b1VUQ1N0cmluZygpOyB9IGRvY3VtZW50LmNvb2tpZSA9IG4gKyAiPSIgKyAodiB8fCAiIikgKyBlICsgIjsgcGF0aD0vIjsgfSwgZ2V0Q29va2llOiBmdW5jdGlvbiAobikgeyB2YXIgbmUgPSBuICsgIj0iOyB2YXIgY2EgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsnKTsgZm9yICh2YXIgaSA9IDA7IGkgPCBjYS5sZW5ndGg7IGkrKykgeyB2YXIgYyA9IGNhW2ldOyB3aGlsZSAoYy5jaGFyQXQoMCkgPT09ICcgJykgYyA9IGMuc3Vic3RyaW5nKDEsIGMubGVuZ3RoKTsgaWYgKGMuaW5kZXhPZihuZSkgPT09IDApIHJldHVybiBjLnN1YnN0cmluZyhuZS5sZW5ndGgsIGMubGVuZ3RoKTsgfSByZXR1cm4gbnVsbDsgfSwgZGVsZXRlQ29va2llOiBmdW5jdGlvbiAobikgeyBSZWQuc2V0Q29va2llKG4sICcnLCAtMTApOyB9LCBmYWRlSW46IGZ1bmN0aW9uIChlLCBkKSB7IGlmICghZSkgcmV0dXJuIGZhbHNlOyBlLnN0eWxlLm9wYWNpdHkgPSAwOyBlLnN0eWxlLmZpbHRlciA9ICJhbHBoYShvcGFjaXR5PTApIjsgZS5zdHlsZS5kaXNwbGF5ID0gIiI7IGlmIChkKSB7IHZhciBvID0gMDsgdmFyIHQgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7IG8gKz0gNTAgLyBkOyBpZiAobyA+PSAxKSB7IGNsZWFySW50ZXJ2YWwodCk7IG8gPSAxOyB9IGUuc3R5bGUuZGlzcGxheSA9ICIiOyBlLnN0eWxlLm9wYWNpdHkgPSBvOyBlLnN0eWxlLmZpbHRlciA9ICJhbHBoYShvcGFjaXR5PSIgKyBvICogMTAwICsgIikiOyB9LCA1MCk7IH0gZWxzZSB7IGUuc3R5bGUub3BhY2l0eSA9IDE7IGUuc3R5bGUuZmlsdGVyID0gImFscGhhKG9wYWNpdHk9MSkiOyB9IH0sIGZhZGVPdXQ6IGZ1bmN0aW9uIChlLCBkKSB7IGlmICghZSkgcmV0dXJuIGZhbHNlOyBpZiAoZCkgeyB2YXIgbyA9IDE7IHZhciB0ID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgeyBvIC09IDUwIC8gZDsgaWYgKG8gPD0gMCkgeyBjbGVhckludGVydmFsKHQpOyBvID0gMDsgZS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOyB9IGUuc3R5bGUub3BhY2l0eSA9IG87IGUuc3R5bGUuZmlsdGVyID0gImFscGhhKG9wYWNpdHk9IiArIG8gKiAxMDAgKyAiKSI7IH0sIDUwKTsgfSBlbHNlIHsgZS5zdHlsZS5vcGFjaXR5ID0gMDsgZS5zdHlsZS5maWx0ZXIgPSAiYWxwaGEob3BhY2l0eT0wKSI7IGUuc3R5bGUuZGlzcGxheSA9ICJub25lIjsgfSB9LCBjcmVhdGU6IGZ1bmN0aW9uICh0LCBwLCBjcCkgeyB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodCk7IGlmIChwICE9IG51bGwpdGhpcy5zZWxlY3QocCkuYXBwZW5kKGUpOyBpZiAoY3AgIT0gbnVsbCkgdGhpcy5zZWxlY3QoZSkuQ1NTKGNwKTsgcmV0dXJuIGU7IH0sIGVhY2g6IGZ1bmN0aW9uIChhLCBmKSB7IHJldHVybiBhLmZvckVhY2goZik7IH0sIG1hcDogZnVuY3Rpb24gKGEsIGYpIHsgcmV0dXJuIGEubWFwKGYpOyB9LCBpbkFycmF5OiBmdW5jdGlvbiAoaSwgYSkgeyByZXR1cm4gYS5pbmRleE9mKGkpOyB9LCBpc0FycmF5OiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gQXJyYXkuaXNBcnJheShhKTsgfSwgdHlwZTogZnVuY3Rpb24gKG8pIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5yZXBsYWNlKC9eW29iamVjdCAoLispXSQvLCAnJDEnKS50b0xvd2VyQ2FzZSgpOyB9LCBub3c6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIERhdGUubm93KCk7IH0sIHRpbWVyOiBmdW5jdGlvbiAoZCwgZSwgbSkgeyB2YXIgcyA9IERhdGUubm93KCksIGRpZmYsIG1zLCBzczsgZnVuY3Rpb24gdGltZXIoKSB7IGRpZmYgPSBkIC0gKCgoRGF0ZS5ub3coKSAtIHMpIC8gMTAwMCkgfCAwKTsgbXMgPSAoZGlmZiAvIDYwKSB8IDA7IHNzID0gKGRpZmYgJSA2MCkgfCAwOyBpZiAobSA9PT0gJ2Z1bGwnKSB7IG1zID0gbXMgPCAxMCA/ICIwIiArIG1zIDogbXM7IHNzID0gc3MgPCAxMCA/ICIwIiArIHNzIDogc3M7IGUudGV4dENvbnRlbnQgPSBtcyArICI6IiArIHNzOyB9IGVsc2UgaWYgKG0gPT09ICdsaWdodCcpIHsgc3MgPSBzcyA8IDEwID8gIjAiICsgc3MgOiBzczsgZS50ZXh0Q29udGVudCA9IHNzOyB9IGlmIChkaWZmIDw9IDApIHsgcyA9IERhdGUubm93KCkgKyAxMDAwOyB9IH0gc2V0SW50ZXJ2YWwodGltZXIsIDEwMDApOyB9LCBhdXRvQ29tcGxldGU6IGZ1bmN0aW9uIChpbnAsIGljLCBsZSwgaWUsIGFyLCBuZm0pIHsgdmFyIHEgPSAwOyBSZWQuc2VsZWN0KGlucCkua2V5dXAoZnVuY3Rpb24gKCkgeyBjTCgpOyB2YXIgc3YgPSBpbnAudmFsdWUsIGk7IFJlZC5zZWxlY3QoaWMpLmFwcGVuZChsZSk7IFJlZC5zZWxlY3QobGUpLmFkZENsYXNzKCdhdXRvLWNvbXBsZXRlLWxpc3QnKTsgaWYgKHEgPT09IDApIHsgcSA9IDEwMDA7IFJlZC5mYWRlSW4obGUsIDEwMDApOyB9IGVsc2UgeyBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcSA9IDA7IH0sIDEwMDApOyB9IHZhciBjID0gMDsgdmFyIGFybCA9IGFyLmxlbmd0aDsgZm9yIChpID0gMDsgaSA8IGFybDsgaSsrKSB7IGlmIChhcltpXS5zdWJzdHIoMCwgc3YubGVuZ3RoKSA9PT0gc3YpIHsgbGV0IG5pZSA9IFJlZC5zZWxlY3QoaWUpLmNsb25lKCk7IFJlZC5zZWxlY3QobmllKS5hZGRDbGFzcygnYXV0by1jb21wbGV0ZS1pdGVtJyk7IFJlZC5zZWxlY3QobGUpLmFwcGVuZChuaWUpOyBuaWUuaW5uZXJIVE1MID0gYXJbaV0uc3Vic3RyKDAsIHN2Lmxlbmd0aCk7IG5pZS5pbm5lckhUTUwgKz0gYXJbaV0uc3Vic3RyKHN2Lmxlbmd0aCk7IG5pZS5pbm5lckhUTUwgKz0gIjxpbnB1dCB0eXBlPSdoaWRkZW4nIHZhbHVlPSciICsgYXJbaV0gKyAiJz4iOyBjKys7IFJlZC5zZWxlY3QobmllKS5jbGljayhmdW5jdGlvbiAoKSB7IGlucC52YWx1ZSA9IG5pZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaW5wdXQnKVswXS52YWx1ZTsgY0woKTsgfSk7IFJlZC5zZWxlY3QobGUpLmFwcGVuZChpZSk7IH0gfSBpZiAoYyA9PT0gMCkgeyBsZXQgaWUgPSBSZWQuY3JlYXRlKCdkaXYnKTsgUmVkLnNlbGVjdChpZSkuYWRkQ2xhc3MoJ2F1dG8tY29tcGxldGUtaXRlbScpOyBSZWQuc2VsZWN0KGllKS5pbm5lckhUTUwobmZtKTsgUmVkLnNlbGVjdChsZSkuYXBwZW5kKGllKTsgfSB9KTsgZnVuY3Rpb24gY0woKSB7IHZhciBsID0gUmVkLmdldCgnLmF1dG8tY29tcGxldGUtbGlzdCcpOyB2YXIgbWkgPSBSZWQuc2VsZWN0KCcuYXV0by1jb21wbGV0ZS1pdGVtJykuZWxlbWVudHMoKTsgaWYgKGwgIT0gbnVsbCAmJiBtaSAhPSBudWxsKSB7IHZhciBwID0gUmVkLnNlbGVjdChsKS5wYXJlbnQoKTsgdmFyIG1pbCA9IG1pLmxlbmd0aCAtIDE7IGZvciAodmFyIGkgPSAwOyBpIDw9IG1pbDsgaSsrKSB7IFJlZC5zZWxlY3QobCkucmVtb3ZlKG1pW2ldKTsgfSBSZWQuc2VsZWN0KHApLnJlbW92ZShsKTsgfSB9IFJlZC5zZWxlY3QoJ2JvZHknKS5jbGljayhmdW5jdGlvbiAoKSB7IGNMKCk7IH0pOyB9LCB2YWxpZGF0ZTogZnVuY3Rpb24gKHMsIGFzKSB7IHZhciBhaWEgPSBhcy5zcGxpdCgnfCcpOyB2YXIgbSA9IGFpYVsxXS5pbmRleE9mKCc6JykgKyAxOyBtID0gYWlhWzFdLnN1YnN0cihtLCBtLmxlbmd0aCk7IHZhciBsID0gYWlhWzJdLmluZGV4T2YoJzonKSArIDE7IGwgPSBhaWFbMl0uc3Vic3RyKGwsIGwubGVuZ3RoKTsgbCA9IGwuc3BsaXQoJy0nKTsgdmFyIG1uID0gbFswXTsgdmFyIG14ID0gbFsxXTsgdmFyIHI7dmFyIHZzcnMgPSB0aGlzLnZzcnM7IE9iamVjdC5rZXlzKHZzcnMpLmZvckVhY2goZnVuY3Rpb24gKGspIHsgaWYgKG0gPT0gdnNyc1trXVsncnVsZSddKXsgdmFyIGNmID0gdnNyc1trXVsnY2FsbGJhY2snXTsgciA9IGNmKGFpYVswXSwgbW4sIG14LCBzKTsgfSB9KTsgaWYgKHIgPT09IHRydWUgfHwgciA9PT0gZmFsc2UpIHsgcmV0dXJuIHI7IH0gaWYgKGFpYVswXSA9PT0gJ3JlcXVpcmVkJykgeyBpZiAobSA9PT0gJ2RpZ2l0JykgeyByID0gcy5tYXRjaCgvXihbMC05XG4gXSkrJC9nKTsgaWYgKHIgPT0gbnVsbCkgeyByZXR1cm4gZmFsc2U7IH0gZWxzZSB7IGlmIChyWzBdLmxlbmd0aCA+PSBtbiAmJiByWzBdLmxlbmd0aCA8PSBteCkgeyByZXR1cm4gdHJ1ZTsgfSBlbHNlIHsgcmV0dXJuIGZhbHNlOyB9IH0gfSBlbHNlIGlmIChtID09PSAnZW4nKSB7IHIgPSBzLm1hdGNoKC9eKFthLXpBLVpcbiBdKSskL2cpOyBpZiAociA9PSBudWxsKSB7IHJldHVybiBmYWxzZTsgfSBlbHNlIHsgaWYgKHJbMF0ubGVuZ3RoID49IG1uICYmIHJbMF0ubGVuZ3RoIDw9IG14KSB7IHJldHVybiB0cnVlOyB9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0gfSB9IGVsc2UgaWYgKG0gPT09ICdlbl9kaWdpdCcpIHsgciA9IHMubWF0Y2goL14oW2EtekEtWjAtOVxuIF0pKyQvZyk7IGlmIChyID09IG51bGwpIHsgcmV0dXJuIGZhbHNlOyB9IGVsc2UgeyBpZiAoclswXS5sZW5ndGggPj0gbW4gJiYgclswXS5sZW5ndGggPD0gbXgpIHsgcmV0dXJuIHRydWU7IH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfSB9IH0gZWxzZSBpZiAobSA9PT0gJ2ZhJykgeyByID0gcy5tYXRjaCgvXihbXG4gw5nCvsOaIMOYwqzDmMKtw5jCrsOZIcOYwrnDmMK6w5nCgcOZGsOYwqvDmMK1w5jCtsOYwrTDmMKzw5tSw5jCqMOZHsOYwqfDmMKqw5kgw5kmw5rCqcOawq/DmcOGw5jCpsOYwq/DmMKww5jCscOYwrLDmMK3w5jCuMOaw5zDmMKkw5jCpcOYwqPDmMKhw5k5w5lSw5nCjcOZfcOZwo/DmcKQw5kYXSkrJC9nKTsgaWYgKHIgPT0gbnVsbCkgeyByZXR1cm4gZmFsc2U7IH0gZWxzZSB7IGlmIChyWzBdLmxlbmd0aCA+PSBtbiAmJiByWzBdLmxlbmd0aCA8PSBteCkgeyByZXR1cm4gdHJ1ZTsgfSBlbHNlIHsgcmV0dXJuIGZhbHNlOyB9IH0gfSBlbHNlIGlmIChtID09PSAnZmFfZGlnaXQnKSB7IHIgPSBzLm1hdGNoKC9eKFtcbjAtOSDDmcK+w5ogw5jCrMOYwq3DmMKuw5khw5jCucOYwrrDmcKBw5kaw5jCq8OYwrXDmMK2w5jCtMOYwrPDm1LDmMKow5kew5jCp8OYwqrDmSDDmSbDmsKpw5rCr8OZw4bDmMKmw5jCr8OYwrDDmMKxw5jCssOYwrfDmMK4w5rDnMOYwqTDmMKlw5jCo8OYwqHDmTnDmVLDmcKNw5l9w5nCj8OZwpDDmRhdKSskL2cpOyBpZiAociA9PSBudWxsKSB7IHJldHVybiBmYWxzZTsgfSBlbHNlIHsgaWYgKHJbMF0ubGVuZ3RoID49IG1uICYmIHJbMF0ubGVuZ3RoIDw9IG14KSB7IHJldHVybiB0cnVlOyB9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0gfSB9IGVsc2UgaWYgKG0gPT09ICdtaXgnKSB7IHIgPSBzLm1hdGNoKC9eKFthLXpBLVowLTlcbiDDmcK+w5ogw5jCrMOYwq3DmMKuw5khw5jCucOYwrrDmcKBw5kaw5jCq8OYwrXDmMK2w5jCtMOYwrPDm1LDmMKow5kew5jCp8OYwqrDmSDDmSbDmsKpw5rCr8OZw4bDmMKmw5jCr8OYwrDDmMKxw5jCssOYwrfDmMK4w5rDnMOYwqTDmMKlw5jCo8OYwqHDmTnDmVLDmcKNw5l9w5nCj8OZwpDDmRhdKSskL2cpOyB9IGVsc2UgaWYgKG0gPT09ICd0ZXh0JykgeyByID0gcy5tYXRjaCgvXihbYS16QS1aMC05XC5cLV8sw5hSO8OYOiE/w5h4QFxuIMOZwr7DmiDDmMKsw5jCrcOYwq7DmSHDmMK5w5jCusOZwoHDmRrDmMKrw5jCtcOYwrbDmMK0w5jCs8ObUsOYwqjDmR7DmMKnw5jCqsOZIMOZJsOawqnDmsKvw5nDhsOYwqbDmMKvw5jCsMOYwrHDmMKyw5jCt8OYwrjDmsOcw5jCpMOYwqXDmMKjw5jCocOZOcOZUsOZwo3DmX3DmcKPw5nCkMOZGF0pKyQvZyk7IH0gZWxzZSBpZiAobSA9PT0gJ3RleHRfZW4nKSB7IHIgPSBzLm1hdGNoKC9eKFthLXpBLVowLTlcLlwtXyw7IT9AXG4gXSkrJC9nKTsgfSBlbHNlIGlmIChtID09PSAndGV4dF9mYScpIHsgciA9IHMubWF0Y2goL14oWzAtOVwuXC1fLMOYUjvDmDohP8OYeEBcbiDDmcK+w5ogw5jCrMOYwq3DmMKuw5khw5jCucOYwrrDmcKBw5kaw5jCq8OYwrXDmMK2w5jCtMOYwrPDm1LDmMKow5kew5jCp8OYwqrDmSDDmSbDmsKpw5rCr8OZw4bDmMKmw5jCr8OYwrDDmMKxw5jCssOYwrfDmMK4w5rDnMOYwqTDmMKlw5jCo8OYwqHDmTnDmVLDmcKNw5l9w5nCj8OZwpDDmRhdKSskL2cpOyB9IGVsc2UgaWYgKG0gPT09ICdlbWFpbCcpIHsgciA9IHMubWF0Y2goL14oKFtePD4oKVxbXF1cLiw7OlxzQFwiXSsoXC5bXjw+KClcW1xdXC4sOzpcc0BcIl0rKSopfChcIi4rXCIpKUAoKFtePD4oKVtcXVwuLDs6XHNAXCJdK1wuKStbXjw+KClbXF1cLiw7OlxzQFwiXXsyLH0pJC9naSk7IH0gZWxzZSBpZiAobSA9PT0gJ0lQJykgeyByID0gcy5tYXRjaCgvXigyNVswLTVdfDJbMC00XVswLTldfFswMV0/WzAtOV1bMC05XT8pXC4oMjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/KVwuKDI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldPylcLigyNVswLTVdfDJbMC00XVswLTldfFswMV0/WzAtOV1bMC05XT8pJC8pOyBpZiAociA9PSBudWxsKSB7IHJldHVybiBmYWxzZTsgfSBlbHNlIHsgcmV0dXJuIHRydWU7IH0gfSBlbHNlIGlmIChtID09PSAndXNlcm5hbWUnKSB7IHIgPSBzLm1hdGNoKC9eKFthLXpBLVowLTlcLlwtX10pKyQvKTsgfSBlbHNlIGlmIChtID09PSAncGFzc3dvcmQnKSB7IHIgPSBzLm1hdGNoKC9eKFthLXpBLVowLTlcLipAXSkrJC8pOyB9IGVsc2UgaWYgKG0gPT09ICdwaG9uZScpIHsgciA9IHMubWF0Y2goL14oWytdezAsMX0pKFswLTldKSskLyk7IH0gZWxzZSBpZiAobSA9PT0gJ2FkZHJlc3MnKSB7IHIgPSBzLm1hdGNoKC9eKFthLXpBLVowLTlcLVxuIMOZwr7DmiDDmMKsw5jCrcOYwq7DmSHDmMK5w5jCusOZwoHDmRrDmMKrw5jCtcOYwrbDmMK0w5jCs8ObUsOYwqjDmR7DmMKnw5jCqsOZIMOZJsOawqnDmsKvw5nDhsOYwqbDmMKvw5jCsMOYwrHDmMKyw5jCt8OYwrjDmsOcw5jCpMOYwqXDmMKjw5jCocOZOcOZUsOZwo3DmX3DmcKPw5nCkMOZGF0pKyQvKTsgfSBlbHNlIGlmIChtID09PSAnYWRkcmVzc19lbicpIHsgciA9IHMubWF0Y2goL14oW2EtekEtWjAtOVwtXG7DmRggXSkrJC8pOyB9IGVsc2UgaWYgKG0gPT09ICdhZGRyZXNzX2ZhJykgeyByID0gcy5tYXRjaCgvXihbMC05XC1cbiDDmcK+w5ogw5jCrMOYwq3DmMKuw5khw5jCucOYwrrDmcKBw5kaw5jCq8OYwrXDmMK2w5jCtMOYwrPDm1LDmMKow5kew5jCp8OYwqrDmSDDmSbDmsKpw5rCr8OZw4bDmMKmw5jCr8OYwrDDmMKxw5jCssOYwrfDmMK4w5rDnMOYwqTDmMKlw5jCo8OYwqHDmTnDmVLDmcKNw5l9w5nCj8OZwpDDmRhdKSskLyk7IH0gaWYgKHIgPT0gbnVsbCkgeyByZXR1cm4gZmFsc2U7IH0gZWxzZSB7IGlmIChyWzBdLmxlbmd0aCA+PSBtbiAmJiByWzBdLmxlbmd0aCA8PSBteCkgeyByZXR1cm4gdHJ1ZTsgfSBlbHNlIHsgcmV0dXJuIGZhbHNlOyB9IH0gfSBlbHNlIGlmIChhaWFbMF0gPT09ICdvcHRpb25hbCcpIHsgaWYgKG0gPT09ICdkaWdpdCcpIHsgciA9IHMubWF0Y2goL14oWzAtOVxuIF0pKiQvZyk7IH0gZWxzZSBpZiAobSA9PT0gJ2VuJykgeyByID0gcy5tYXRjaCgvXihbYS16QS1aXG4gXSkqJC9nKTsgfSBlbHNlIGlmIChtID09PSAnZW5fZGlnaXQnKSB7IHIgPSBzLm1hdGNoKC9eKFthLXpBLVowLTlcbiBdKSokL2cpOyB9IGVsc2UgaWYgKG0gPT09ICdmYScpIHsgciA9IHMubWF0Y2goL14oW1xuIMOZwr7DmiDDmMKsw5jCrcOYwq7DmSHDmMK5w5jCusOZwoHDmRrDmMKrw5jCtcOYwrbDmMK0w5jCs8ObUsOYwqjDmR7DmMKnw5jCqsOZIMOZJsOawqnDmsKvw5nDhsOYwqbDmMKvw5jCsMOYwrHDmMKyw5jCt8OYwrjDmsOcw5jCpMOYwqXDmMKjw5jCocOZOcOZUsOZwo3DmX3DmcKPw5nCkMOZGF0pKiQvZyk7IH0gZWxzZSBpZiAobSA9PT0gJ2ZhX2RpZ2l0JykgeyByID0gcy5tYXRjaCgvXihbXG4wLTkgw5nCvsOaIMOYwqzDmMKtw5jCrsOZIcOYwrnDmMK6w5nCgcOZGsOYwqvDmMK1w5jCtsOYwrTDmMKzw5tSw5jCqMOZHsOYwqfDmMKqw5kgw5kmw5rCqcOawq/DmcOGw5jCpsOYwq/DmMKww5jCscOYwrLDmMK3w5jCuMOaw5zDmMKkw5jCpcOYwqPDmMKhw5k5w5lSw5nCjcOZfcOZwo/DmcKQw5kYXSkqJC9nKTsgfSBlbHNlIGlmIChtID09PSAnbWl4JykgeyByID0gcy5tYXRjaCgvXihbYS16QS1aMC05XG4gw5nCvsOaIMOYwqzDmMKtw5jCrsOZIcOYwrnDmMK6w5nCgcOZGsOYwqvDmMK1w5jCtsOYwrTDmMKzw5tSw5jCqMOZHsOYwqfDmMKqw5kgw5kmw5rCqcOawq/DmcOGw5jCpsOYwq/DmMKww5jCscOYwrLDmMK3w5jCuMOaw5zDmMKkw5jCpcOYwqPDmMKhw5k5w5lSw5nCjcOZfcOZwo/DmcKQw5kYXSkqJC9nKTsgfSBlbHNlIGlmIChtID09PSAndGV4dCcpIHsgciA9IHMubWF0Y2goL14oW2EtekEtWjAtOVwuXC1fLMOYUjvDmDohP8OYeEBcbiDDmcK+w5ogw5jCrMOYwq3DmMKuw5khw5jCucOYwrrDmcKBw5kaw5jCq8OYwrXDmMK2w5jCtMOYwrPDm1LDmMKow5kew5jCp8OYwqrDmSDDmSbDmsKpw5rCr8OZw4bDmMKmw5jCr8OYwrDDmMKxw5jCssOYwrfDmMK4w5rDnMOYwqTDmMKlw5jCo8OYwqHDmTnDmVLDmcKNw5l9w5nCj8OZwpDDmRhdKSokL2cpOyB9IGVsc2UgaWYgKG0gPT09ICd0ZXh0X2VuJykgeyByID0gcy5tYXRjaCgvXihbYS16QS1aMC05XC5cLV8sOyE/QFxuIF0pKiQvZyk7IH0gZWxzZSBpZiAobSA9PT0gJ3RleHRfZmEnKSB7IHIgPSBzLm1hdGNoKC9eKFswLTlcLlwtXyzDmFI7w5g6IcOYeEBcbiDDmcK+w5ogw5jCrMOYwq3DmMKuw5khw5jCucOYwrrDmcKBw5kaw5jCq8OYwrXDmMK2w5jCtMOYwrPDm1LDmMKow5kew5jCp8OYwqrDmSDDmSbDmsKpw5rCr8OZw4bDmMKmw5jCr8OYwrDDmMKxw5jCssOYwrfDmMK4w5rDnMOYwqTDmMKlw5jCo8OYwqHDmTnDmVLDmcKNw5l9w5nCj8OZwpDDmRhdKSokL2cpOyB9IGVsc2UgaWYgKG0gPT09ICdlbWFpbCcpIHsgciA9IHMubWF0Y2goL14oKFtePD4oKVxbXF1cLiw7OlxzQFwiXSsoXC5bXjw+KClcW1xdXC4sOzpcc0BcIl0rKSopfChcIi4rXCIpKUAoKFtePD4oKVtcXVwuLDs6XHNAXCJdK1wuKStbXjw+KClbXF1cLiw7OlxzQFwiXXsyLH0pJC9naSk7IH0gZWxzZSBpZiAobSA9PT0gJ0lQJykgeyByID0gcy5tYXRjaCgvXigyNVswLTVdfDJbMC00XVswLTldfFswMV0/WzAtOV1bMC05XT8pXC4oMjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/KVwuKDI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldPylcLigyNVswLTVdfDJbMC00XVswLTldfFswMV0/WzAtOV1bMC05XT8pJC8pOyBpZiAociA9PSBudWxsKSB7IGlmIChzLmxlbmd0aCA9PT0gMCkgeyByZXR1cm4gdHJ1ZSB9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0gfSBlbHNlIHsgaWYgKHMubGVuZ3RoID09PSAwKSB7IHJldHVybiB0cnVlIH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfSB9IH0gZWxzZSBpZiAobSA9PT0gJ3VzZXJuYW1lJykgeyByID0gcy5tYXRjaCgvXihbYS16QS1aMC05XC5cLV9dKSokLyk7IH0gZWxzZSBpZiAobSA9PT0gJ3Bhc3N3b3JkJykgeyByID0gcy5tYXRjaCgvXihbYS16QS1aMC05XC4qQF0pKiQvKTsgfSBlbHNlIGlmIChtID09PSAncGhvbmUnKSB7IHIgPSBzLm1hdGNoKC9eKFsrXXswLDF9KShbMC05XSkqJC8pOyB9IGVsc2UgaWYgKG0gPT09ICdhZGRyZXNzJykgeyByID0gcy5tYXRjaCgvXihbYS16QS1aMC05XC1cbiDDmcK+w5ogw5jCrMOYwq3DmMKuw5khw5jCucOYwrrDmcKBw5kaw5jCq8OYwrXDmMK2w5jCtMOYwrPDm1LDmMKow5kew5jCp8OYwqrDmSDDmSbDmsKpw5rCr8OZw4bDmMKmw5jCr8OYwrDDmMKxw5jCssOYwrfDmMK4w5rDnMOYwqTDmMKlw5jCo8OYwqHDmTnDmVLDmcKNw5l9w5nCj8OZwpDDmRhdKSokLyk7IH0gZWxzZSBpZiAobSA9PT0gJ2FkZHJlc3NfZW4nKSB7IHIgPSBzLm1hdGNoKC9eKFthLXpBLVowLTlcLVxuw5kYIF0pKiQvKTsgfSBlbHNlIGlmIChtID09PSAnYWRkcmVzc19mYScpIHsgciA9IHMubWF0Y2goL14oWzAtOVwtXG4gw5nCvsOaIMOYwqzDmMKtw5jCrsOZIcOYwrnDmMK6w5nCgcOZGsOYwqvDmMK1w5jCtsOYwrTDmMKzw5tSw5jCqMOZHsOYwqfDmMKqw5kgw5kmw5rCqcOawq/DmcOGw5jCpsOYwq/DmMKww5jCscOYwrLDmMK3w5jCuMOaw5zDmMKkw5jCpcOYwqPDmMKhw5k5w5lSw5nCjcOZfcOZwo/DmcKQw5kYXSkqJC8pOyB9IGlmIChyID09IG51bGwpIHsgaWYgKHMubGVuZ3RoID09PSAwKSB7IHJldHVybiB0cnVlIH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfSB9IGVsc2UgeyBpZiAoclswXS5sZW5ndGggPj0gbW4gJiYgclswXS5sZW5ndGggPD0gbXgpIHsgcmV0dXJuIHRydWU7IH0gZWxzZSB7IGlmIChzLmxlbmd0aCA9PT0gMCkgeyByZXR1cm4gdHJ1ZSB9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0gfSB9IH0gfSwgYWRkVmFsaWRhdGVSdWxlOiBmdW5jdGlvbihyLCBjYil7IHRoaXMudnNycy5wdXNoKHsgJ3J1bGUnOiByLCAgJ2NhbGxiYWNrJzogY2IgfSk7IH0sIGZpbHRlcjogZnVuY3Rpb24gKHMsIG0pIHsgaWYgKG0gPT09ICdkaWdpdCcpIHsgcmV0dXJuIHMucmVwbGFjZSgvW14wLTlcbiBdL2dpbSwgJycpOyB9IGVsc2UgaWYgKG0gPT09ICdlbicpIHsgcmV0dXJuIHMucmVwbGFjZSgvW15hLXpBLVpcbiBdL2dpbSwgJycpOyB9IGVsc2UgaWYgKG0gPT09ICdlbl9kaWdpdCcpIHsgcmV0dXJuIHMucmVwbGFjZSgvW15hLXpBLVowLTlcbiBdL2dpbSwgJycpOyB9IGVsc2UgaWYgKG0gPT09ICdmYScpIHsgcmV0dXJuIHMucmVwbGFjZSgvW15cbiDDmcK+w5ogw5jCrMOYwq3DmMKuw5khw5jCucOYwrrDmcKBw5kaw5jCq8OYwrXDmMK2w5jCtMOYwrPDm1LDmMKow5kew5jCp8OYwqrDmSDDmSbDmsKpw5rCr8OZw4bDmMKmw5jCr8OYwrDDmMKxw5jCssOYwrfDmMK4w5rDnMOYwqTDmMKlw5jCo8OYwqHDmTnDmVLDmcKNw5l9w5nCj8OZwpDDmRhdL2dpbSwgJycpOyB9IGVsc2UgaWYgKG0gPT09ICdmYV9kaWdpdCcpIHsgcmV0dXJuIHMucmVwbGFjZSgvW15cbjAtOSDDmcK+w5ogw5jCrMOYwq3DmMKuw5khw5jCucOYwrrDmcKBw5kaw5jCq8OYwrXDmMK2w5jCtMOYwrPDm1LDmMKow5kew5jCp8OYwqrDmSDDmSbDmsKpw5rCr8OZw4bDmMKmw5jCr8OYwrDDmMKxw5jCssOYwrfDmMK4w5rDnMOYwqTDmMKlw5jCo8OYwqHDmTnDmVLDmcKNw5l9w5nCj8OZwpDDmRhdL2dpbSwgJycpOyB9IGVsc2UgaWYgKG0gPT09ICdtaXgnKSB7IHJldHVybiBzLnJlcGxhY2UoL1teYS16QS1aMC05XG4gw5nCvsOaIMOYwqzDmMKtw5jCrsOZIcOYwrnDmMK6w5nCgcOZGsOYwqvDmMK1w5jCtsOYwrTDmMKzw5tSw5jCqMOZHsOYwqfDmMKqw5kgw5kmw5rCqcOawq/DmcOGw5jCpsOYwq/DmMKww5jCscOYwrLDmMK3w5jCuMOaw5zDmMKkw5jCpcOYwqPDmMKhXS9naW0sICcnKTsgfSBlbHNlIGlmIChtID09PSAndGV4dCcpIHsgcmV0dXJuIHMucmVwbGFjZSgvW15hLXpBLVowLTlcLlwtXyzDmFI7w5g6IT/DmHhAXG4gw5nCvsOaIMOYwqzDmMKtw5jCrsOZIcOYwrnDmMK6w5nCgcOZGsOYwqvDmMK1w5jCtsOYwrTDmMKzw5tSw5jCqMOZHsOYwqfDmMKqw5kgw5kmw5rCqcOawq/DmcOGw5jCpsOYwq/DmMKww5jCscOYwrLDmMK3w5jCuMOaw5zDmMKkw5jCpcOYwqPDmMKhXS9naW0sICcnKTsgfSBlbHNlIGlmIChtID09PSAndGV4dF9lbicpIHsgcmV0dXJuIHMucmVwbGFjZSgvW15hLXpBLVowLTlcLlwtXyw7IT9AXG4gXS9naW0sICcnKTsgfSBlbHNlIGlmIChtID09PSAndGV4dF9mYScpIHsgcmV0dXJuIHMucmVwbGFjZSgvW14wLTlcLlwtXyzDmFI7w5g6IcOYeEBcbiDDmcK+w5ogw5jCrMOYwq3DmMKuw5khw5jCucOYwrrDmcKBw5kaw5jCq8OYwrXDmMK2w5jCtMOYwrPDm1LDmMKow5kew5jCp8OYwqrDmSDDmSbDmsKpw5rCr8OZw4bDmMKmw5jCr8OYwrDDmMKxw5jCssOYwrfDmMK4w5rDnMOYwqTDmMKlw5jCo8OYwqFdL2dpbSwgJycpOyB9IGVsc2UgaWYgKG0gPT09ICdlbWFpbCcpIHsgcmV0dXJuIHMucmVwbGFjZSgvW15hLXpBLVowLTlAXS9naW0sICcnKTsgfSBlbHNlIGlmIChtID09PSAnSVAnKSB7IHJldHVybiBzLnJlcGxhY2UoL1teMC05Ll0vZ2ltLCAnJyk7IH0gZWxzZSBpZiAobSA9PT0gJ3VzZXJuYW1lJykgeyByZXR1cm4gcy5yZXBsYWNlKC9bXmEtekEtWjAtOVwuXC1fXS9naW0sICcnKTsgfSBlbHNlIGlmIChtID09PSAncGFzc3dvcmQnKSB7IHJldHVybiBzLnJlcGxhY2UoL1teYS16QS1aMC05XC4qQF0vZ2ltLCAnJyk7IH0gZWxzZSBpZiAobSA9PT0gJ3Bob25lJykgeyByZXR1cm4gcy5yZXBsYWNlKC9bXjAtOStdL2dpbSwgJycpOyB9IGVsc2UgaWYgKG0gPT09ICdhZGRyZXNzJykgeyByZXR1cm4gcy5yZXBsYWNlKC9bXmEtekEtWjAtOVwtXG4gw5nCvsOaIMOYwqzDmMKtw5jCrsOZIcOYwrnDmMK6w5nCgcOZGsOYwqvDmMK1w5jCtsOYwrTDmMKzw5tSw5jCqMOZHsOYwqfDmMKqw5kgw5kmw5rCqcOawq/DmcOGw5jCpsOYwq/DmMKww5jCscOYwrLDmMK3w5jCuMOaw5zDmMKkw5jCpcOYwqPDmMKhXS9naW0sICcnKTsgfSBlbHNlIGlmIChtID09PSAnYWRkcmVzc19lbicpIHsgcmV0dXJuIHMucmVwbGFjZSgvW15hLXpBLVowLTlcLVxuXS9naW0sICcnKTsgfSBlbHNlIGlmIChtID09PSAnYWRkcmVzc19mYScpIHsgcmV0dXJuIHMucmVwbGFjZSgvW14wLTlcLVxuIMOZwr7DmiDDmMKsw5jCrcOYwq7DmSHDmMK5w5jCusOZwoHDmRrDmMKrw5jCtcOYwrbDmMK0w5jCs8ObUsOYwqjDmR7DmMKnw5jCqsOZIMOZJsOawqnDmsKvw5nDhsOYwqbDmMKvw5jCsMOYwrHDmMKyw5jCt8OYwrjDmsOcw5jCpMOYwqXDmMKjw5jCoV0vZ2ltLCAnJyk7IH0gdmFyIGZzcnMgPSB0aGlzLmZzcnM7IE9iamVjdC5rZXlzKGZzcnMpLmZvckVhY2goZnVuY3Rpb24gKGspIHsgaWYgKG0gPT0gZnNyc1trXVsncnVsZSddKXsgdmFyIGNmID0gZnNyc1trXVsnY2FsbGJhY2snXTsgcyA9IGNmKHMpOyB9IH0pOyByZXR1cm4gczsgfSwgIGFkZEZpbHRlclJ1bGU6IGZ1bmN0aW9uKHIsIGNiKXsgdGhpcy5mc3JzLnB1c2goeyAncnVsZSc6IHIsICdjYWxsYmFjayc6IGNiIH0pOyB9LCBzYW5pdGl6ZTogZnVuY3Rpb24gKHMsIG0pIHsgaWYgKG0gPT09ICdkaWdpdCcpIHsgcmV0dXJuIHMucmVwbGFjZSgvKFswLTldKSsvKTsgfSBlbHNlIGlmIChtID09PSAnc3BhY2UnKSB7IHJldHVybiBzLnJlcGxhY2UoLyhcc1xuKSsvKTsgfSB2YXIgc3NycyA9IHRoaXMuc3NyczsgT2JqZWN0LmtleXMoc3NycykuZm9yRWFjaChmdW5jdGlvbiAoaykgeyBpZiAobSA9PSBzc3JzW2tdWydydWxlJ10peyB2YXIgY2YgPSBzc3JzW2tdWydjYWxsYmFjayddOyBzID0gY2Yocyk7IH0gfSk7IHJldHVybiBzO30sIGFkZFNhbml0aXplUnVsZTogZnVuY3Rpb24ociwgY2IpeyB0aGlzLnNzcnMucHVzaCh7ICdydWxlJzogciwgJ2NhbGxiYWNrJzogY2IgfSk7IH0sIHRyaW06IGZ1bmN0aW9uIChzKSB7IHJldHVybiBzLnRyaW0oKTsgfSwgZ2VuZXJhdGVSYW5kb21JbnQ6IGZ1bmN0aW9uIGdldFJuZEludGVnZXIobW4sIG14KSB7IHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobXggLSBtbiArIDEpKSArIG1uOyB9LCB9Owo8L3NjcmlwdD4KCjxkaXYgY2xhc3M9Im92ZXJsYXkiPjwvZGl2Pgo8ZGl2IGlkPSJoZWFkZXIiPgogICAgPGRpdiBpZD0ic2Nyb2xsaW5nLXdyYXBwZXIiPgogICAgICAgIDxkaXYgY2xhc3M9InNjcm9sbGluZy1jb250ZW50Ij4KICAgICAgICAgICAgPGltZyBjbGFzcz0ic2xpZGVzIiBzcmM9Imh0dHBzOi8vaS5pYmIuY28vcm01UURxQi9kc2RzYWQuanBnIiB3aWR0aD0iNDAwIiBoZWlnaHQ9IjIwMCIgYWx0PSJTbGlkZSAxIj4KICAgICAgICAgICAgPGltZyBjbGFzcz0ic2xpZGVzIiBzcmM9Imh0dHBzOi8vaWlsaS5pby9kUlEzeUxRLmpwZyIgd2lkdGg9IjQwMCIgaGVpZ2h0PSIyMDAiIGFsdD0iU2xpZGUgMiI+CiAgICAgICAgICAgIDxpbWcgY2xhc3M9InNsaWRlcyIgc3JjPSJodHRwczovL2kuaWJiLmNvL2hZSFQyd2cvZGRkZC5qcGciIHdpZHRoPSI0MDAiIGhlaWdodD0iMjAwIiBhbHQ9IlNsaWRlIDMiPgogICAgICAgICAgICA8aW1nIGNsYXNzPSJzbGlkZXMiIHNyYz0iaHR0cHM6Ly9pLmliYi5jby93NlBUcHJEL3Bob3RvLTYxNTg3MzI5MDgxOTAzNTEyNTEteS5qcGciIHdpZHRoPSI0MDAiIGhlaWdodD0iMjAwIiBhbHQ9IlNsaWRlIDQiPiAgICAKICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICAgPHN0eWxlPgogICAgICAgICNzY3JvbGxpbmctd3JhcHBlciB7CiAgICAgICAgICAgIHdpZHRoOiA3MCU7CiAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgICAgICAgbWFyZ2luOiAwIGF1dG87IC8qIENlbnRlciB0aGUgd3JhcHBlciAqLwogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgLyogQ2VudGVyIGhvcml6b250YWxseSAqLwogICAgICAgIH0KCiAgICAgICAgLnNjcm9sbGluZy1jb250ZW50IHsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsgLyogUHJldmVudCB3cmFwcGluZyAqLwogICAgICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC41cyBlYXNlLWluLW91dDsgLyogU21vb3RoIHRyYW5zaXRpb24gZm9yIHNjcm9sbGluZyAqLwogICAgICAgICAgICBhbmltYXRpb246IHNjcm9sbCAxOHMgaW5maW5pdGU7IC8qIE9wdGlvbmFsOiBBZGRpbmcgYmFzaWMgc2Nyb2xsIGFuaW1hdGlvbiAqLwogICAgfQoKICAgICAgICAuc2Nyb2xsaW5nLWNvbnRlbnQgaW1nIHsKICAgICAgICAgICAgbWFyZ2luOiAzMHB4IGF1dG87CiAgICAgICAgICAgIHdpZHRoOiA1MDBweDsKICAgICAgICAgICAgaGVpZ2h0OiAyMDBweDsKICAgICAgICB9CiAgICAgICAgQGtleWZyYW1lcyBzY3JvbGwgewogICAgICAgICAgICAwJSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWCgwKTsgfQogICAgICAgICAgICAyMCUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTMzLjMzJSk7IH0KICAgICAgICAgICAgNDAlIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC0zMy4zMyUpOyB9CiAgICAgICAgICAgIDYwJSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWCgwKTsgfQogICAgICAgICAgICA4MCUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMzMuMzMlKTsgfQogICAgICAgICAgICAxMDAlIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDMzLjMzJSk7IH0KICAgIH0KICAgIDwvc3R5bGU+ICAgIAogICAgPGRpdiBpZD0iaGVhZGVyLXRleHQiPgogICAgICAgIDxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+IEBpbXBvcnQgdXJsKCJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2Nzcz9mYW1pbHk9SWNlbGFuZHxTaGFkb3dzK0ludG8rTGlnaHQmZGlzcGxheT1zd2FwIik7IGJvZHl7IG92ZXJmbG93OmhpZGRlbjsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IG1hcmdpbjowOyBwYWRkaW5nOjA7IHdpZHRoOjEwMCU7IGJhY2tncm91bmQtY29sb3I6YmxhY2s7IG92ZXJmbG93LXk6IGF1dG87IGhlaWdodDogMTAwJTsgfSBpeyBtYXJnaW46MTBweDsgY29sb3I6IHJlZDsgfSBhOmxpbmt7IGNvbG9yOiMwMDA7IH0gaDF7IGNvbG9yOiAjMDAwOyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IGJvcmRlci1yYWRpdXM6MHB4OyBib3JkZXI6MHB4OyBmb250LWZhbWlseTogJ1NoYWRvd3MgSW50byBMaWdodCcsIGN1cnNpdmU7IGZvbnQtc2l6ZTozNXB4OyBtYXJnaW46MHB4OyBwYWRkaW5nOjBweDsgYW5pbWF0aW9uOnBzeWNob3hwbG9pdCAwLjVzIGxpbmVhciBpbmZpbml0ZTsgfSBwcmV7IGNvbG9yOmdyZXk7IH0gbWFycXVlZXsgd2lkdGg6MTAwJTsgfSBAa2V5ZnJhbWVzIHBzeWNob3hwbG9pdHsgMiV7Y29sb3I6I2ZmZjt9IDMle3RyYW5zZm9ybTp0cmFuc2xhdGUoMnB4LC0xMHB4KSBza2V3WCgzMjQwZGVnKTt9IDUle3RyYW5zZm9ybTp0cmFuc2xhdGUoMHB4LDBweCkgc2tld1goMGRlZyk7fSAyJSAsIDU0JXt0cmFuc2Zvcm06dHJhbnNsYXRlWCgwcHgpIHNrZXcoMGRlZyk7fSA1NSV7dHJhbnNmb3JtOnRyYW5zbGF0ZSgtMnB4LDZweCkgc2tldygtNTUzMGRlZyk7fSA1NiV7dHJhbnNmb3JtOnRyYW5zbGF0ZSgwcHgsMHB4KSBza2V3KDBkZWcpO30gNTcle3RyYW5zZm9ybTp0cmFuc2xhdGUoNHB4LC0xMHB4KSBza2V3KC03MGRlZyk7fSA1OCV7dHJhbnNmb3JtOnRyYW5zbGF0ZSgwcHgsMHB4KSBza2V3KDBkZWcpO30gNjIle3RyYW5zZm9ybTp0cmFuc2xhdGUoMHB4LDIwcHgpIHNrZXcoMGRlZyk7fSA2MyV7dHJhbnNmb3JtOnRyYW5zbGF0ZSg0cHgsLTJweCkgc2tldygwZGVnKTt9IDkwJXt0cmFuc2Zvcm06dHJhbnNsYXRlKDFweCwzcHgpOyBza2V3KC0yMzBkZWcpO30gOTUle3RyYW5zZm9ybTp0cmFuc2xhdGUoLTdweCwycHgpOyBza2V3KC0xMjBkZWcpO30gMTAwJXt0cmFuc2Zvcm06dHJhbnNsYXRlKDBweCwwcHgpIHNrZXcoMGRlZyk7fSA8L3N0eWxlPiA8Ym9keSBvbmRyYWdzdGFydD0id2luZG93LmV2ZW50LnJldHVyblZhbHVlPWZhbHNlIiBvbnNlbGVjdHN0YXJ0PSJldmVudC5yZXR1cm5WYWx1ZT1mYWxzZSI+IDxzY3JpcHQ+IChmdW5jdGlvbiAoKSB7IGZvcih2YXIgaSA9IDA7IGkgPCAyMDsgaSsrKSB7IGhpc3RvcnkucHVzaFN0YXRlKG51bGwsIGRvY3VtZW50LnRpdGxlLCB3aW5kb3cubG9jYXRpb24uaHJlZiApOyB9IH0pKGRvY3VtZW50LCB3aW5kb3csIGhpc3RvcnkpOyA8L3NjcmlwdD4gPGNlbnRlcj4KPGJyPgo8ZGl2IGNsYXNzPSJsb2dvLWNvbnRhaW5lciI+CiAgICA8aW1nIHNyYz0iaHR0cHM6Ly9pLmliYi5jby9mOWdGOGY0L0pVU1RJQ0UtMS5wbmciIGNsYXNzPSJyZWxhdGl2ZS1pbWFnZSI+CjwvZGl2PgoKPHN0eWxlPgogICAgLmxvZ28tY29udGFpbmVyIHsKICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgICAgd2lkdGg6IDEwMCU7IC8qIEZ1bGwgd2lkdGggb2YgdGhlIHBhcmVudCBjb250YWluZXIgKi8KICAgICAgICBoZWlnaHQ6IDE4MHB4OyAvKiBBZGp1c3QgaGVpZ2h0IGFzIG5lZWRlZCAqLwogICAgfQogICAgLnJlbGF0aXZlLWltYWdlIHsKICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgICAgdG9wOiAtNTBweDsgLyogTW92ZXMgdGhlIGltYWdlIDIwcHggZG93biBmcm9tIHRoZSB0b3Agb2YgaXRzIGNvbnRhaW5lciAqLwogICAgICAgIHdpZHRoOiAyNTBweDsgLyogU2V0cyB0aGUgaW1hZ2Ugd2lkdGggdG8gMjUwcHggKi8KICAgICAgICBoZWlnaHQ6IGF1dG87IC8qIE1haW50YWlucyB0aGUgYXNwZWN0IHJhdGlvIG9mIHRoZSBpbWFnZSAqLwogICAgfQo8L3N0eWxlPgoKPGgyPkhBQ0tFRCBCWSBKVVNUSUNFPC9oMj4KPGgxPjxmb250IGNvbG9yPSJ3aGl0ZSI+4Kam4Kar4Ka+IOCnpyw8L2ZvbnQ+PGZvbnQgY29sb3I9InJlZCI+IOCmpuCmvuCmrOCmvyDgp6cgITwvZm9udD4KPGJyPgo8Zm9udCBjb2xvcj0icmVkIj7gprjgp43gpqzgp4jgprDgpr7gpprgpr7gprAg4Ka54Ka+4Kaf4Ka+4KaTLDwvZm9udD4g4Kam4KeH4Ka2IOCmrOCmvuCmgeCmmuCmvuCmkyAhPC9oMT4KPGRpdiBpZD0icGhyYXNlLWNvbnRhaW5lciI+CiAgICA8ZGl2IGNsYXNzPSJwaHJhc2VzIj48L2Rpdj4KPC9kaXY+CjxkaXYgc3R5bGU9IndpZHRoOiA2MCU7IG1hcmdpbjogMCBhdXRvOyI+CiAgPHA+CiAgICBUaGUgQmFuZ2xhZGVzaCBHb3Zlcm5tZW50IHJ1dGhsZXNzbHkgY3J1c2hlZCBhIHBlYWNlZnVsIHN0dWRlbnQgcHJvdGVzdCBmb3IgcXVvdGEgcmVmb3JtLiBFdmVuIGFmdGVyIHR3ZWFraW5nIHRoZSBxdW90YSBzeXN0ZW0sIHRoZXkgZG9kZ2VkIHJlc3BvbnNpYmlsaXR5IGZvciB0aGUgdmlvbGVuY2UgYW5kIGRlbmllZCBqdXN0aWNlIHRvIHRoZSBwZW9wbGUuIFRoZWlyIGFjdGlvbnMgY3Jvc3NlZCBldmVyeSBsaW5lIG9mIGRlY2VuY3kuIEl04oCZcyB0aW1lIGZvciBnbG9iYWwgc3VwcG9ydCBmb3IgdGhlIHN0dWRlbnRzIGZpZ2h0aW5nIGFnYWluc3QgdGhpcyBicnV0YWwgcmVnaW1lLgogIDwvcD4KPC9kaXY+Cjxmb250IGNvbG9yPSJyZWQiPjxwPiNTYXZlQmFuZ2xhZGVzaGlTdHVkZW50cyAjU3RlcERvd25IYXNpbmE8L3A+PC9mb250PgoKPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPgp2YXIgUm9vdCA9IHsKICAgIGhlYWRlcl90ZXh0OiBSZWQuc2VsZWN0KCIjaGVhZGVyLXRleHQiKSwKICAgIGY0azNfbG9nbzogUmVkLnNlbGVjdCgiI2Y0azMtbG9nbyIpLAogICAgZGVmYWNlcl9pbmZvOiBSZWQuc2VsZWN0KCIjZGVmYWNlci1pbmZvIiksCiAgICBkZWZhY2VyX25hbWU6IFJlZC5zZWxlY3QoIiNkZWZhY2VyLW5hbWUiKSwKICAgIHBocmFzZV9jb250YWluZXI6IFJlZC5zZWxlY3QoIiNwaHJhc2UtY29udGFpbmVyIiksCiAgICBwaHJhc2VzOiBSZWQuc2VsZWN0KCIucGhyYXNlcyIpLAogICAgZm9vdGVyOiBSZWQuc2VsZWN0KCIjZm9vdGVyIiksCiAgICBvdmVybGF5OiBSZWQuc2VsZWN0KCIub3ZlcmxheSIpLAogICAgc2NhcnlfbXVzaWM6IFJlZC5zZWxlY3QoIiNzY2FyeS1tdXNpYyIpLAoKICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uIChtdXNpYykgewoKICAgICAgICBpZiAobXVzaWMgPT09ICJvbiIpIHsKICAgICAgICAgICAgUm9vdC5tdXNpY0hhbmRsZXIoKTsKICAgICAgICB9CiAgICAgICAgUm9vdC5waHJhc2VzSGFuZGxlcigpOwogICAgICAgIAogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJyZXNpemUiLCBSb290LmhhbmRsZUNvbXBvbmVudHNPblNpemUpOwogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJsb2FkIiwgUm9vdC5oYW5kbGVDb21wb25lbnRzT25TaXplKTsKICAgIH0sCgogICAgbXVzaWNIYW5kbGVyOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgUmVkLnNlbGVjdCgiYm9keSIpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgUm9vdC5zY2FyeV9tdXNpYy5wbGF5KCk7CiAgICAgICAgICAgIHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIFJvb3Quc2NhcnlfbXVzaWMucGxheSgpOwogICAgICAgICAgICB9LCBSb290LnNjYXJ5X211c2ljLmVsZW1lbnRzKClbMF0uZHVyYXRpb24gKyAxKTsKICAgICAgICB9KTsKICAgIH0sCgogICAgcGhyYXNlc0hhbmRsZXI6IGZ1bmN0aW9uICgpIHsKICAgICAgICBjb25zdCBwaHJhc2VzID0gWwogICAgICAgICAgICAn4Kaa4KeH4Kef4KeH4Kab4Ka/4Kay4Ka+4KauIOCmheCmp+Cmv+CmleCmvuCmsCwg4Ka54Kef4KeHIOCml+Cnh+CmsuCmvuCmriDgprDgpr7gppzgpr7gppXgpr7gprAgIScsIAogICAgICAgICAgICAn4Kam4Kec4Ka/IOCmp+CmsOCnhyDgpq7gpr7gprDgp4sg4Kaf4Ka+4KaoLCDgprDgpr7gpqjgp4Ag4Ka54Kas4KeHIOCmluCmvuCmqCDgppbgpr7gpqggIScsCiAgICAgICAgICAgICfgpo8g4KaV4KeH4Kau4KaoIOCmuOCni+CmqOCmvuCmsCDgpqzgpr7gpoLgprLgpr4sIOCmm+CmvuCmpOCnjeCmsOCmsuCngOCmlyDgppXgprDgprLgp4sg4Ka54Ka+4Kau4Kay4Ka+ICEnLAogICAgICAgIF07CgogICAgICAgIHZhciBmeCA9IG5ldyBUZXh0U2NyYW1ibGUoUm9vdC5waHJhc2VzLmVsZW1lbnRzKClbMF0pOwoKICAgICAgICBsZXQgY291bnRlciA9IDA7CiAgICAgICAgY29uc3QgbmV4dCA9ICgpID0+IHsKICAgICAgICAgICAgZnguc2V0VGV4dChwaHJhc2VzW2NvdW50ZXJdKS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQobmV4dCwgNDAwMCkKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNvdW50ZXIgPSAoY291bnRlciArIDEpICUgcGhyYXNlcy5sZW5ndGgKICAgICAgICB9OwoKICAgICAgICBuZXh0KCk7CiAgICB9LAoKICAgIGhhbmRsZUNvbXBvbmVudHNPblNpemU6IGZ1bmN0aW9uICgpIHsKCiAgICAgICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoID49IDEyMDApIHsKCiAgICAgICAgICAgIFJvb3QuZjRrM19sb2dvLkNTUyh7CiAgICAgICAgICAgICAgICBwYWRkaW5nVG9wOiAiMTMuNDc1NDA5ODM2MDY1NTczdmgiLAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIFJvb3QuaGVhZGVyX3RleHQuQ1NTKHsKICAgICAgICAgICAgICAgIGZvbnRTaXplOiAiMjJweCIsCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgUm9vdC5kZWZhY2VyX2luZm8uQ1NTKHsKICAgICAgICAgICAgICAgIHdpZHRoOiAiNDAlIiwKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBSb290LmRlZmFjZXJfbmFtZS5DU1MoewogICAgICAgICAgICAgICAgd2lkdGg6ICIzMCUiLAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIFJvb3QucGhyYXNlX2NvbnRhaW5lci5DU1MoewogICAgICAgICAgICAgICAgaGVpZ2h0OiAiIiwKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBSb290LmZvb3Rlci5DU1MoewogICAgICAgICAgICAgICAgcGFkZGluZ0JvdHRvbTogIiIsCiAgICAgICAgICAgIH0pOwoKICAgICAgICB9IGVsc2UgaWYgKHdpbmRvdy5pbm5lcldpZHRoID49IDk5MikgewoKICAgICAgICAgICAgUm9vdC5mNGszX2xvZ28uQ1NTKHsKICAgICAgICAgICAgICAgIHBhZGRpbmdUb3A6ICIxMy40NzU0MDk4MzYwNjU1NzN2aCIsCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgUm9vdC5oZWFkZXJfdGV4dC5DU1MoewogICAgICAgICAgICAgICAgZm9udFNpemU6ICIyMnB4IiwKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBSb290LmRlZmFjZXJfaW5mby5DU1MoewogICAgICAgICAgICAgICAgd2lkdGg6ICI0MCUiLAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIFJvb3QuZGVmYWNlcl9uYW1lLkNTUyh7CiAgICAgICAgICAgICAgICB3aWR0aDogIjMwJSIsCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgUm9vdC5waHJhc2VfY29udGFpbmVyLkNTUyh7CiAgICAgICAgICAgICAgICBoZWlnaHQ6ICIiLAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIFJvb3QuZm9vdGVyLkNTUyh7CiAgICAgICAgICAgICAgICBwYWRkaW5nQm90dG9tOiAiIiwKICAgICAgICAgICAgfSk7CgogICAgICAgIH0gZWxzZSBpZiAod2luZG93LmlubmVyV2lkdGggPj0gNzY4KSB7CgogICAgICAgICAgICBSb290LmY0azNfbG9nby5DU1MoewogICAgICAgICAgICAgICAgcGFkZGluZ1RvcDogIjEzLjQ3NTQwOTgzNjA2NTU3M3ZoIiwKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBSb290LmhlYWRlcl90ZXh0LkNTUyh7CiAgICAgICAgICAgICAgICBmb250U2l6ZTogIjIycHgiLAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIFJvb3QuZGVmYWNlcl9pbmZvLkNTUyh7CiAgICAgICAgICAgICAgICB3aWR0aDogIjQwJSIsCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgUm9vdC5kZWZhY2VyX25hbWUuQ1NTKHsKICAgICAgICAgICAgICAgIHdpZHRoOiAiMzAlIiwKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBSb290LnBocmFzZV9jb250YWluZXIuQ1NTKHsKICAgICAgICAgICAgICAgIGhlaWdodDogIiIsCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgUm9vdC5mb290ZXIuQ1NTKHsKICAgICAgICAgICAgICAgIHBhZGRpbmdCb3R0b206ICIiLAogICAgICAgICAgICB9KTsKCiAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA+PSA1NzYpIHsKCiAgICAgICAgICAgIFJvb3QuZjRrM19sb2dvLkNTUyh7CiAgICAgICAgICAgICAgICBwYWRkaW5nVG9wOiAiMTMuNDc1NDA5ODM2MDY1NTczdmgiLAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIFJvb3QuaGVhZGVyX3RleHQuQ1NTKHsKICAgICAgICAgICAgICAgIGZvbnRTaXplOiAiMjBweCIsCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgUm9vdC5kZWZhY2VyX2luZm8uQ1NTKHsKICAgICAgICAgICAgICAgIHdpZHRoOiAiODAlIiwKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBSb290LmRlZmFjZXJfbmFtZS5DU1MoewogICAgICAgICAgICAgICAgd2lkdGg6ICIzMCUiLAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIFJvb3QucGhyYXNlX2NvbnRhaW5lci5DU1MoewogICAgICAgICAgICAgICAgaGVpZ2h0OiAiMzBweCIsCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgUm9vdC5mb290ZXIuQ1NTKHsKICAgICAgICAgICAgICAgIHBhZGRpbmdCb3R0b206ICIiLAogICAgICAgICAgICB9KTsKCiAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8IDU3NikgewoKICAgICAgICAgICAgUm9vdC5mNGszX2xvZ28uQ1NTKHsKICAgICAgICAgICAgICAgIHBhZGRpbmdUb3A6ICI3LjQ3NTQwOTgzNjA2NTU3M3ZoIiwKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBSb290LmhlYWRlcl90ZXh0LkNTUyh7CiAgICAgICAgICAgICAgICBmb250U2l6ZTogIjE4cHgiLAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIFJvb3QuZGVmYWNlcl9pbmZvLkNTUyh7CiAgICAgICAgICAgICAgICB3aWR0aDogIjgwJSIsCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgUm9vdC5kZWZhY2VyX25hbWUuQ1NTKHsKICAgICAgICAgICAgICAgIHdpZHRoOiAiNDAlIiwKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBSb290LnBocmFzZV9jb250YWluZXIuQ1NTKHsKICAgICAgICAgICAgICAgIGhlaWdodDogIjMwcHgiLAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIFJvb3QuZm9vdGVyLkNTUyh7CiAgICAgICAgICAgICAgICBwYWRkaW5nQm90dG9tOiAiMjBweCIsCiAgICAgICAgICAgIH0pOwoKICAgICAgICB9CgogICAgICAgIHZhciBib2R5ID0gZG9jdW1lbnQuYm9keSwKICAgICAgICAgICAgaHRtbCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKCiAgICAgICAgdmFyIGhlaWdodCA9IE1hdGgubWF4KCBib2R5LnNjcm9sbEhlaWdodCwgYm9keS5vZmZzZXRIZWlnaHQsCiAgICAgICAgICAgIGh0bWwuY2xpZW50SGVpZ2h0LCBodG1sLnNjcm9sbEhlaWdodCwgaHRtbC5vZmZzZXRIZWlnaHQgKTsKCiAgICAgICAgUm9vdC5vdmVybGF5LkNTUyh7CiAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0ICsgInB4IiAsCiAgICAgICAgfSk7CiAgICB9LAoKfTsKCmNsYXNzIFRleHRTY3JhbWJsZSB7CiAgICBjb25zdHJ1Y3RvcihlbCkgewogICAgICAgIHRoaXMuZWwgPSBlbDsKICAgICAgICB0aGlzLmNoYXJzID0gJyFAIyQlXiYqKClfLT0re306Inw8Pj8sLi87JzsKICAgICAgICB0aGlzLnVwZGF0ZSA9IHRoaXMudXBkYXRlLmJpbmQodGhpcykKICAgIH0KCiAgICBzZXRUZXh0KG5ld1RleHQpIHsKICAgICAgICBjb25zdCBvbGRUZXh0ID0gdGhpcy5lbC5pbm5lclRleHQ7CiAgICAgICAgY29uc3QgbGVuZ3RoID0gTWF0aC5tYXgob2xkVGV4dC5sZW5ndGgsIG5ld1RleHQubGVuZ3RoKTsKICAgICAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHRoaXMucmVzb2x2ZSA9IHJlc29sdmUpOwogICAgICAgIHRoaXMucXVldWUgPSBbXTsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGNvbnN0IGZyb20gPSBvbGRUZXh0W2ldIHx8ICcnOwogICAgICAgICAgICBjb25zdCB0byA9IG5ld1RleHRbaV0gfHwgJyc7CiAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNDApOwogICAgICAgICAgICBjb25zdCBlbmQgPSBzdGFydCArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDQwKTsKICAgICAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKHtmcm9tLCB0bywgc3RhcnQsIGVuZH0pCiAgICAgICAgfQogICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuZnJhbWVSZXF1ZXN0KTsKICAgICAgICB0aGlzLmZyYW1lID0gMDsKICAgICAgICB0aGlzLnVwZGF0ZSgpOwogICAgICAgIHJldHVybiBwcm9taXNlOwogICAgfQoKICAgIHVwZGF0ZSgpIHsKICAgICAgICBsZXQgb3V0cHV0ID0gJyc7CiAgICAgICAgbGV0IGNvbXBsZXRlID0gMDsKICAgICAgICBmb3IgKGxldCBpID0gMCwgbiA9IHRoaXMucXVldWUubGVuZ3RoOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgIGxldCB7ZnJvbSwgdG8sIHN0YXJ0LCBlbmQsIGNoYXJ9ID0gdGhpcy5xdWV1ZVtpXTsKICAgICAgICAgICAgaWYgKHRoaXMuZnJhbWUgPj0gZW5kKSB7CiAgICAgICAgICAgICAgICBjb21wbGV0ZSsrOwogICAgICAgICAgICAgICAgb3V0cHV0ICs9IHRvOwogICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZnJhbWUgPj0gc3RhcnQpIHsKICAgICAgICAgICAgICAgIGlmICghY2hhciB8fCBNYXRoLnJhbmRvbSgpIDwgMC4yOCkgewogICAgICAgICAgICAgICAgICAgIGNoYXIgPSB0aGlzLnJhbmRvbUNoYXIoKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlW2ldLmNoYXIgPSBjaGFyCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBvdXRwdXQgKz0gYDxzcGFuIGNsYXNzPSJkdWQiPiR7Y2hhcn08L3NwYW4+YAogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgb3V0cHV0ICs9IGZyb20KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0aGlzLmVsLmlubmVySFRNTCA9IG91dHB1dDsKICAgICAgICBpZiAoY29tcGxldGUgPT09IHRoaXMucXVldWUubGVuZ3RoKSB7CiAgICAgICAgICAgIHRoaXMucmVzb2x2ZSgpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5mcmFtZVJlcXVlc3QgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy51cGRhdGUpOwogICAgICAgICAgICB0aGlzLmZyYW1lKysKICAgICAgICB9CiAgICB9CgogICAgcmFuZG9tQ2hhcigpIHsKICAgICAgICByZXR1cm4gdGhpcy5jaGFyc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0aGlzLmNoYXJzLmxlbmd0aCldCiAgICB9Cn0KICAgIFJlZC5yZWFkeShmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIG11c2ljID0gIm9uIjsKICAgICAgICBSb290LmluaXRpYWxpemUobXVzaWMpOwogICAgfSk7Cjwvc2NyaXB0PgogPC9oZWFkPiAKPC9ib2R5Pgo8L2h0bWw+");
